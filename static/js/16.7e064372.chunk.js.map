{"version":3,"sources":["images/arrowBack.svg","redux/schedule/scheduleSelectors.js","redux/schedule/scheduleActions.js","services/useCustomQuery.js","redux/schedule/scheduleOperations.js","components/ScheduleContainer/Member.js","pages/CrewPage.js"],"names":["_path","_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgArrowBack","_ref","svgRef","title","titleId","props","width","height","viewBox","fill","xmlns","ref","id","d","ForwardRef","getSchedule","state","schedule","getCrew","crew","getbuses","buses","getPassengers","passengers","getFormatSchedule","createSelector","day","sort","a","b","Date","departure","getTime","reduce","arr","el","some","date","moment","format","push","trips","acc","item","scheduleMonth","data","type","Types","GET_SCHEDULE","payload","crewAll","GET_CREW","currentTrip","trip","bus","CURRENT_TRIP","busesAll","GET_BUSES","removeBusId","DELETE_BUS","includeTrip","INCLUDE_TRIP","excludeTrip","EXCLUDE_TRIP","passangersAll","GET_PASSENGERS","scheduleLoader","SCHEDULE_LOADER_START","scheduleError","SCHEDULE_ERROR","useQuery","URLSearchParams","useLocation","search","axios","defaults","baseURL","getScheduleMonth","from","to","dispatch","getState","auth","globalSelectors","headers","Authorization","getCrewAll","getBusesAll","tripId","getPassengersAll","Member","member","useDispatch","useState","includes","isAppointed","setIsAppointed","useSelector","getAuth","toAppointMember","toAppoint","tripVehicleId","status","console","log","toRemoveMember","deleteMemeber","Card","FlexRow","LinkBox","href","phone","FlexColumn","Text","bold","surname","name","memberType","toUpperCase","BusNumber","number","onClick","styled","div","prop","theme","border","device","tablet","p","Container","CrewPage","history","useHistory","query","get","JSON","parse","window","atob","isAdd","setIsAdd","find","crewInfo","useCallback","useEffect","toggleOpenModalAdd","Header","Title","List","map","ButtonAdd","click","Modal","open","onClose","AddMember","header","mainColor","ul"],"mappings":"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","file":"static/js/16.7e064372.chunk.js","sourcesContent":["var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgArrowBack(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 30,\n    height: 20,\n    viewBox: \"0 0 30 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M30 8.33333H6.38333L12.35 2.35L10 0L0 10L10 20L12.35 17.65L6.38333 11.6667H30V8.33333Z\",\n    fill: \"#7E7070\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgArrowBack);\nexport default __webpack_public_path__ + \"static/media/arrowBack.beea4bf3.svg\";\nexport { ForwardRef as ReactComponent };","import moment from 'moment'\r\nimport { createSelector } from 'reselect'\r\n\r\nexport const getSchedule = state => state.schedule.schedule\r\nexport const getCrew = state => state.schedule.crew\r\nexport const getCurrentTrip = state => state.schedule.currentTrip\r\nexport const getbuses = state => state.schedule.buses\r\nexport const getPassengers = state => state.schedule.passengers\r\n\r\nexport const getFormatSchedule = createSelector(getSchedule, day => {\r\n  return day\r\n    .sort((a, b) => {\r\n      const A = new Date(a.departure).getTime()\r\n      const B = new Date(b.departure).getTime()\r\n\r\n      return A - B\r\n    })\r\n    .reduce((arr, el) => {\r\n      if (!arr.some(i => i.date === moment(el.departure).format('YYYY-MM-DD'))) {\r\n        arr.push({\r\n          date: moment(el.departure).format('YYYY-MM-DD'),\r\n          trips: day.reduce((acc, item) => {\r\n            if (\r\n              moment(item.departure).format('YYYY-MM-DD') ===\r\n              moment(el.departure).format('YYYY-MM-DD')\r\n            ) {\r\n              acc.push(item)\r\n            }\r\n            return acc\r\n          }, []),\r\n        })\r\n      }\r\n      return arr\r\n    }, [])\r\n})\r\n","import { Types } from '../actionTypes'\r\n\r\nexport const scheduleMonth = data => ({ type: Types.GET_SCHEDULE, payload: data })\r\n\r\nexport const crewAll = data => ({ type: Types.GET_CREW, payload: data })\r\n\r\nexport const currentTrip = (trip, bus) => ({\r\n  type: Types.CURRENT_TRIP,\r\n  payload: { trip, bus },\r\n})\r\n\r\nexport const busesAll = data => ({ type: Types.GET_BUSES, payload: data })\r\n\r\nexport const appointBus = id => ({ type: Types.APPOINT_BUS, payload: id })\r\n\r\nexport const removeBusId = id => ({ type: Types.DELETE_BUS, payload: id })\r\n\r\nexport const includeTrip = data => ({ type: Types.INCLUDE_TRIP, payload: data })\r\n\r\nexport const excludeTrip = data => ({ type: Types.EXCLUDE_TRIP, payload: data })\r\n\r\nexport const passangersAll = data => ({ type: Types.GET_PASSENGERS, payload: data })\r\n\r\nexport const scheduleLoader = () => ({ type: Types.SCHEDULE_LOADER_START })\r\n\r\nexport const scheduleError = data => ({ type: Types.SCHEDULE_ERROR, payload: data })\r\n","import { useLocation } from 'react-router'\r\n\r\nexport const useQuery = () => {\r\n  return new URLSearchParams(useLocation().search)\r\n}\r\n","import axios from 'axios'\r\nimport * as globalSelectors from '../global/globalSelectors'\r\nimport {\r\n  busesAll,\r\n  crewAll,\r\n  scheduleError,\r\n  scheduleLoader,\r\n  scheduleMonth,\r\n  passangersAll,\r\n} from './scheduleActions'\r\n\r\naxios.defaults.baseURL = 'https://car.busis.eu'\r\n\r\nexport const getScheduleMonth = (from, to) => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(scheduleLoader())\r\n  try {\r\n    const { data } = await axios(`/api/schedule?from=${from}&to=${to}`, {\r\n      headers: { Authorization: auth },\r\n    })\r\n    dispatch(scheduleMonth(data))\r\n  } catch (error) {\r\n    dispatch(scheduleError(error))\r\n  }\r\n}\r\n\r\nexport const getCrewAll = () => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(scheduleLoader())\r\n  try {\r\n    const { data } = await axios(`/api/schedule/member/all`, {\r\n      headers: { Authorization: auth },\r\n    })\r\n    dispatch(crewAll(data))\r\n  } catch (error) {\r\n    dispatch(scheduleError(error))\r\n  }\r\n}\r\n\r\nexport const getBusesAll = (departure, tripId) => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(scheduleLoader())\r\n  try {\r\n    const { data } = await axios(\r\n      `api/schedule/vehicle/available?departure=${departure}&tripId=${tripId} `,\r\n      {\r\n        headers: { Authorization: auth },\r\n      }\r\n    )\r\n    dispatch(busesAll(data))\r\n  } catch (error) {\r\n    dispatch(scheduleError(error))\r\n  }\r\n}\r\n\r\nexport const getPassengersAll = (departure, tripId) => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(scheduleLoader())\r\n  try {\r\n    const { data } = await axios(\r\n      `api/schedule/passenger/all?departure=${departure}&tripId=${tripId} `,\r\n      {\r\n        headers: { Authorization: auth },\r\n      }\r\n    )\r\n    dispatch(passangersAll(data))\r\n  } catch (error) {\r\n    dispatch(scheduleError(error))\r\n  }\r\n}\r\n\r\n// api/schedule/passenger/all?departure=2021-09-16&tripId=36314\r\n","import React, { useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport styled from 'styled-components'\r\nimport { device } from '../../stylesheets/device'\r\nimport { ReactComponent as DeleteIcon } from '../../images/delete.svg'\r\nimport { ReactComponent as PhoneIcon } from '../../images/phone.svg'\r\nimport { Button } from '../../stylesheets/mainStyled'\r\nimport { deleteMemeber, toAppoint } from '../../services/apiMethods'\r\nimport { getAuth } from '../../redux/global/globalSelectors'\r\nimport { scheduleError } from '../../redux/schedule/scheduleActions'\r\n\r\nconst Member = ({ member, bus, trip }) => {\r\n  const dispatch = useDispatch()\r\n  const [isAppointed, setIsAppointed] = useState(bus.crew && bus.crew.includes(member.id))\r\n\r\n  const auth = useSelector(getAuth)\r\n\r\n  // назначить сотрудника на рейс\r\n  const toAppointMember = async () => {\r\n    try {\r\n      const { status } = await toAppoint(member.id, bus.tripVehicleId, auth)\r\n      if (status === 200) setIsAppointed(!isAppointed)\r\n    } catch (error) {\r\n      console.log(error)\r\n      dispatch(scheduleError(error))\r\n    }\r\n  }\r\n  // убрать сотрудника с рейса\r\n  const toRemoveMember = async () => {\r\n    try {\r\n      const { status } = await deleteMemeber(member.id, bus.tripVehicleId, auth)\r\n      if (status === 200) setIsAppointed(!isAppointed)\r\n    } catch (error) {\r\n      dispatch(scheduleError(error))\r\n    }\r\n  }\r\n  return (\r\n    <>\r\n      <Card>\r\n        <FlexRow>\r\n          <LinkBox href={`tel: +${member.phone}`}>\r\n            <PhoneIcon />\r\n          </LinkBox>\r\n          <FlexColumn>\r\n            <Text bold>\r\n              {member.surname} {member.name}\r\n            </Text>\r\n            <Text>{member.phone}</Text>\r\n            <Text bold>{member.memberType.toUpperCase()}</Text>\r\n            {isAppointed ? (\r\n              <BusNumber>{bus.number}</BusNumber>\r\n            ) : (\r\n              <Button onClick={toAppointMember}>Использовать</Button>\r\n            )}\r\n          </FlexColumn>\r\n        </FlexRow>\r\n        {isAppointed && <DeleteIcon onClick={toRemoveMember} />}\r\n      </Card>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Member\r\n\r\nconst Card = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0 10px 20px 0;\r\n  margin-bottom: 20px;\r\n  border-bottom: ${prop => prop.theme.border};\r\n\r\n  @media ${device.tablet} {\r\n    flex-direction: column;\r\n    border: ${prop => prop.theme.border};\r\n    border-radius: 4px;\r\n    padding: 12px;\r\n    margin-right: 20px;\r\n    background-color: rgba(0, 0, 0, 0.1);\r\n    box-shadow: 0 4px 4px rgba(0, 0, 0, 0.1);\r\n  }\r\n`\r\nconst FlexRow = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  @media ${device.tablet} {\r\n    flex-direction: column;\r\n  }\r\n`\r\nconst LinkBox = styled.a`\r\n  padding: 12px;\r\n  @media ${device.tablet} {\r\n    padding: 0 40px;\r\n    margin-bottom: 12px;\r\n  }\r\n`\r\nconst FlexColumn = styled.div`\r\n  padding-left: 20px;\r\n  cursor: pointer;\r\n\r\n  @media ${device.tablet} {\r\n    margin-bottom: 12px;\r\n  }\r\n`\r\nconst Text = styled.p`\r\n  font-size: 18px;\r\n  font-weight: ${prop => (prop.bold ? 700 : 400)};\r\n  margin-bottom: 6px;\r\n`\r\nconst BusNumber = styled.p`\r\n  max-width: 140px;\r\n  padding: 6px 20px;\r\n  border: ${prop => prop.theme.border};\r\n  border-radius: 4px;\r\n  font-size: 18px;\r\n  background-color: #fff;\r\n`\r\n","import React, { useState, useEffect, useCallback } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport { device } from '../stylesheets/device'\r\nimport { ReactComponent as ArrowBackIcon } from '../images/arrowBack.svg'\r\nimport Modal from '../components/Modal'\r\nimport ButtonAdd from '../components/ButtonAdd'\r\nimport AddMember from '../components/AddMember'\r\nimport { getCrewAll } from '../redux/schedule/scheduleOperations'\r\nimport { getCrew, getSchedule } from '../redux/schedule/scheduleSelectors'\r\nimport moment from 'moment'\r\nimport { useQuery } from '../services/useCustomQuery'\r\nimport Member from '../components/ScheduleContainer/Member'\r\n\r\nconst CrewPage = () => {\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n  const query = useQuery()\r\n\r\n  const tripId = query.get('tripId')\r\n  const bus = JSON.parse(window.atob(query.get('bus')))\r\n  const [isAdd, setIsAdd] = useState(false)\r\n  const crew = useSelector(getCrew)\r\n  const trip = useSelector(getSchedule).find(\r\n    trip =>\r\n      trip.id === tripId &&\r\n      trip.departure === moment(query.get('departure')).format('YYYY-MM-DD HH:mm')\r\n  )\r\n  const crewInfo = useCallback(() => {\r\n    dispatch(getCrewAll())\r\n  }, [dispatch])\r\n\r\n  useEffect(() => {\r\n    crewInfo()\r\n  }, [crewInfo])\r\n  const handleAdd = () => setIsAdd(!isAdd)\r\n  const toggleOpenModalAdd = () => setIsAdd(!isAdd)\r\n  const goBack = () => history.push('/schedule')\r\n  return (\r\n    <Container>\r\n      <Header>\r\n        <ArrowBackIcon onClick={goBack} />\r\n        <Title>\r\n          {moment(query.get('departure')).format('HH:mm')} {trip.name}\r\n        </Title>\r\n      </Header>\r\n      <List>\r\n        {crew.length > 0 &&\r\n          crew.map(member => (\r\n            <Member key={member.id} member={member} bus={bus} trip={trip} />\r\n          ))}\r\n      </List>\r\n      <ButtonAdd click={toggleOpenModalAdd} />\r\n      <Modal open={isAdd} onClose={toggleOpenModalAdd}>\r\n        <AddMember onClose={handleAdd} />\r\n      </Modal>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default CrewPage\r\n\r\nconst Container = styled.div``\r\n\r\nconst Header = styled.header`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  background-color: ${prop => prop.theme.mainColor};\r\n  padding: 12.4px 24px;\r\n`\r\nconst List = styled.ul`\r\n  padding: 20px;\r\n  margin: 0;\r\n  @media ${device.tablet} {\r\n    display: flex;\r\n  }\r\n`\r\n\r\nconst Title = styled.p`\r\n  font-size: 24px;\r\n`\r\n"],"sourceRoot":""}
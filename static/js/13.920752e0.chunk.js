(this.webpackJsonpdispetcher=this.webpackJsonpdispetcher||[]).push([[13],{312:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r,a=n(0),c=["title","titleId"];function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function o(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},c=Object.keys(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function u(t,e){var n=t.title,u=t.titleId,s=o(t,c);return a.createElement("svg",i({width:31,height:24,viewBox:"0 0 31 24",xmlns:"http://www.w3.org/2000/svg",fill:"#7E7070",ref:e,"aria-labelledby":u},s),n?a.createElement("title",{id:u},n):null,r||(r=a.createElement("path",{d:"M10.5254 17.4302L4.4849 11.3897L4.13134 11.0362L3.77779 11.3897L1.64645 13.5211L1.29289 13.8746L1.64645 14.2282L10.1718 22.7536L10.5254 23.1071L10.8789 22.7536L29.1476 4.4849L29.5011 4.13134L29.1476 3.77779L27.0162 1.64645L26.6627 1.29289L26.3091 1.64645L10.5254 17.4302Z",stroke:"#7E7070"})))}var s=a.forwardRef(u);n.p},314:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r,a=n(0),c=["title","titleId"];function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function o(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},c=Object.keys(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function u(t,e){var n=t.title,u=t.titleId,s=o(t,c);return a.createElement("svg",i({width:30,height:20,viewBox:"0 0 30 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":u},s),n?a.createElement("title",{id:u},n):null,r||(r=a.createElement("path",{d:"M30 8.33333H6.38333L12.35 2.35L10 0L0 10L10 20L12.35 17.65L6.38333 11.6667H30V8.33333Z",fill:"#7E7070"})))}var s=a.forwardRef(u);n.p},318:function(t,e,n){"use strict";n.d(e,"i",(function(){return c})),n.d(e,"h",(function(){return i})),n.d(e,"f",(function(){return u})),n.d(e,"j",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return p})),n.d(e,"e",(function(){return f})),n.d(e,"d",(function(){return d})),n.d(e,"a",(function(){return b})),n.d(e,"g",(function(){return j}));var r=n(12),a=n(94),c=function(t){return t.trips.trips},i=function(t){return t.trips.trip},o=function(t){return t.trips.period},u=function(t){return t.trips.route},s=function(t){return t.trips.typeTrip},l=function(t){return t.trips.loader},p=function(t){return t.trips.error},f=Object(a.a)(o,(function(t){if(t)return t.find((function(t){return t.hasOwnProperty("times")}))})),d=Object(a.a)(o,(function(t){if(t)return t.find((function(t){return t.hasOwnProperty("days")}))})),b=Object(a.a)(u,(function(t){return t.trips.currentStop}),(function(t,e){var n;return e||(null===(n=t[0])||void 0===n?void 0:n.locality.parent.id)})),j=Object(a.a)(u,(function(t){return t.trips.tariff}),(function(t,e){return t.length>0?t.reduce((function(n,a){var c=t.reduce((function(n,r,c){return a.locality.parent.id!==r.locality.parent.id&&(e.some((function(e){return e.fromId===a.locality.parent.id&&e.toId===t[c].locality.parent.id}))||t.findIndex((function(t){return t.locality.parent.id===a.locality.parent.id}))<=c&&n.push({fromId:a.locality.parent.id,toId:t[c].locality.parent.id,value:""})),n}),[]);return n.push.apply(n,Object(r.a)(c)),n}),Object(r.a)(e)):[]}))},322:function(t,e,n){"use strict";var r,a,c=n(5),i=(n(0),n(4)),o=n(31),u=n(92),s=n(314),l=n(1);e.a=function(t){var e=t.onGoBack,n=t.name,r=void 0===n?null:n;return Object(l.jsxs)(p,{children:[Object(l.jsxs)("div",{children:[e&&Object(l.jsx)(s.a,{onClick:e,style:{cursor:"pointer"}}),Object(l.jsxs)(f,{children:["\u0420\u0435\u0439\u0441 ",r]})]}),Object(l.jsx)(o.b,{to:"/trips",children:Object(l.jsx)(u.a,{})})]})};var p=i.b.div(r||(r=Object(c.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: ",";\n  padding: 12.4px 24px;\n  & div {\n    display: flex;\n    align-items: center;\n  }\n"])),(function(t){return t.theme.mainColor})),f=i.b.p(a||(a=Object(c.a)(["\n  font-size: 24px;\n  padding-left: 12px;\n"])))},323:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(13),a=function(){return new URLSearchParams(Object(r.h)().search)}},327:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return d})),n.d(e,"f",(function(){return b})),n.d(e,"e",(function(){return j}));var r=n(70),a=n.n(r),c=n(89),i=n(7),o=n.n(i),u=n(43),s=n(93);o.a.defaults.baseURL="https://car.busis.eu";var l=function(){return function(){var t=Object(c.a)(a.a.mark((function t(e,n){var r,c,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=u.a(n())){t.next=3;break}return t.abrupt("return");case 3:return e(Object(s.n)()),t.prev=4,t.next=7,o()("/api/trip/all",{headers:{Authorization:r}});case 7:c=t.sent,i=c.data,e(Object(s.c)(i)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),e(Object(s.m)(t.t0));case 15:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e,n){return t.apply(this,arguments)}}()},p=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n,r){var c,i,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=u.a(r())){e.next=3;break}return e.abrupt("return");case 3:return n(Object(s.n)()),e.prev=4,e.next=7,o()("/api/trip?tripId=".concat(t),{headers:{Authorization:c}});case 7:i=e.sent,l=i.data,n(Object(s.i)(l)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),n(Object(s.m)(e.t0));case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,n){return e.apply(this,arguments)}}()},f=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n,r){var c,i,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=u.a(r())){e.next=3;break}return e.abrupt("return");case 3:return n(Object(s.n)()),e.prev=4,e.next=7,o()("/api/trip/period?tripId=".concat(t),{headers:{Authorization:c}});case 7:i=e.sent,l=i.data,n(Object(s.j)(l)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),n(Object(s.m)(e.t0));case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,n){return e.apply(this,arguments)}}()},d=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n,r){var c,i,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=u.a(r())){e.next=3;break}return e.abrupt("return");case 3:return n(Object(s.n)()),e.prev=4,e.next=7,o()("/api/trip/route?tripId=".concat(t),{headers:{Authorization:c}});case 7:i=e.sent,l=i.data,n(Object(s.k)(l)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),n(Object(s.m)(e.t0));case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,n){return e.apply(this,arguments)}}()},b=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n,r){var c,i,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=u.a(r())){e.next=3;break}return e.abrupt("return");case 3:return n(Object(s.n)()),e.prev=4,e.next=7,o()("/api/trip/tariff?tripId=".concat(t),{headers:{Authorization:c}});case 7:i=e.sent,l=i.data,n(Object(s.l)(l)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),n(Object(s.m)(e.t0));case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,n){return e.apply(this,arguments)}}()},j=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n,r){var c,i,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=u.a(r())){e.next=3;break}return e.abrupt("return");case 3:return n(Object(s.n)()),e.prev=4,e.next=7,o()("/api/trip/route?tripId=".concat(t),{headers:{Authorization:c}});case 7:return i=e.sent,e.next=10,o()("/api/trip/tariff?tripId=".concat(t),{headers:{Authorization:c}});case 10:l=e.sent,n(Object(s.k)(i.data)),n(Object(s.l)(l.data)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),n(Object(s.m)(e.t0));case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t,n){return e.apply(this,arguments)}}()}},328:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r,a=n(0),c=["title","titleId"];function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function o(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},c=Object.keys(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function u(t,e){var n=t.title,u=t.titleId,s=o(t,c);return a.createElement("svg",i({width:14,height:18,viewBox:"0 0 14 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":u},s),n?a.createElement("title",{id:u},n):null,r||(r=a.createElement("path",{d:"M1 16C1 17.1 1.9 18 3 18H11C12.1 18 13 17.1 13 16V4H1V16ZM14 1H10.5L9.5 0H4.5L3.5 1H0V3H14V1Z",fill:"black"})))}var s=a.forwardRef(u);n.p},331:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r,a=n(0),c=["title","titleId"];function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function o(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},c=Object.keys(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function u(t,e){var n=t.title,u=t.titleId,s=o(t,c);return a.createElement("svg",i({width:13,height:22,viewBox:"0 0 13 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":u},s),n?a.createElement("title",{id:u},n):null,r||(r=a.createElement("path",{d:"M2.5 0.5L0.0325012 2.9675L8.0475 11L0.0325012 19.0325L2.5 21.5L13 11L2.5 0.5Z",fill:"#7E7070"})))}var s=a.forwardRef(u);n.p},508:function(t,e,n){"use strict";n.r(e);var r,a,c,i,o,u,s,l,p=n(5),f=n(70),d=n.n(f),b=n(89),j=n(29),h=n(27),O=n(0),v=n(464),x=n(21),g=n(13),m=n(4),y=n(91),w=n(88),k=n(331),L=n(312),I=n(328),E=n(43),P=n(322),S=n(93),z=n(318),C=n(327),R=n(90),A=n(323),H=n(1);e.default=function(){var t=Object(x.c)(),e=Object(g.g)(),n=Object(g.h)(),r=Object(A.a)().get("tripId"),a=Object(x.d)(E.b),c=Object(x.d)(z.h),i=Object(x.d)(z.f),o=Object(x.d)(z.c),u=Object(x.d)(z.j),s=Object(x.d)(z.b),l=Object(x.d)(E.a),p=Object(O.useState)([]),f=Object(h.a)(p,2),m=f[0],G=f[1],J=Object(O.useCallback)((function(e){return t(Object(C.d)(e))}),[t]);Object(O.useEffect)((function(){c.emptyRoute||i.length>0||J(r)}),[r,i.length,c,J]),Object(O.useEffect)((function(){G(i.map((function(t,e){return Object(j.a)(Object(j.a)({},t),{},{id:"item-".concat(e)})})))}),[i]);var N=function(t){return t.locality.parent.name[a]||t.locality.parent.name.RU||t.locality.parent.name.UA||t.locality.parent.name.EN||t.locality.parent.name.PL},q=function(t){return t.locality.address?t.locality.address[a]||t.locality.address.RU||t.locality.address.UA||t.locality.address.EN||t.locality.address.PL:""},K=function(){var n=Object(b.a)(d.a.mark((function n(){var a,c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t(Object(S.m)(null)),!(m.length>0)){n.next=16;break}return n.prev=2,n.next=5,Object(R.c)(m,r,l);case 5:a=n.sent,c=a.data,t(Object(S.k)(c)),e.push({pathname:"/trip-map",search:"?tripId=".concat(r),state:{from:"/trip-route?tripId=".concat(r)}}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(2),t(Object(S.m)(n.t0));case 14:n.next=18;break;case 16:t(Object(S.k)(m)),e.push({pathname:"/trip-map",search:"?tripId=".concat(r),state:{from:"/trip-route?tripId=".concat(r)}});case 18:case"end":return n.stop()}}),n,null,[[2,11]])})));return function(){return n.apply(this,arguments)}}(),Q=function(){var n=Object(b.a)(d.a.mark((function n(){var a,c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t(Object(S.n)()),n.prev=1,n.next=4,Object(R.c)(m,r,l);case 4:a=n.sent,c=a.data,t(Object(S.k)(c)),"edit"===u?e.push({pathname:"/trip-edit",search:"?tripId=".concat(r)}):e.push({pathname:"/trip-tariff",search:"?tripId=".concat(r),state:{from:"trip-route?tripId=".concat(r)}}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),t(Object(S.m)(n.t0));case 13:case"end":return n.stop()}}),n,null,[[1,10]])})));return function(){return n.apply(this,arguments)}}();return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(P.a,{onGoBack:function(){t(Object(S.m)(null)),e.push(n.state.from)},name:c.name}),Object(H.jsxs)(B,{children:[Object(H.jsx)(U,{children:"\u041c\u0430\u0440\u0448\u0440\u0443\u0442"}),Object(H.jsx)(D,{children:"(\u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u043c\u043e\u0436\u043d\u043e \u0434\u0432\u0438\u0433\u0430\u0442\u044c)"}),Object(H.jsx)(v.a,{onDragEnd:function(t){if(t.destination){var e=function(t,e,n){var r=Array.from(t),a=r.splice(e,1),c=Object(h.a)(a,1)[0];return r.splice(n,0,c),r}(m,t.source.index,t.destination.index);G(e)}},children:Object(H.jsx)(v.c,{droppableId:"droppable",children:function(t,e){return Object(H.jsxs)("div",Object(j.a)(Object(j.a)({},t.droppableProps),{},{ref:t.innerRef,children:[m.map((function(t,e){return Object(H.jsx)(v.b,{draggableId:t.id,index:e,children:function(e,n){return Object(H.jsx)(V,Object(j.a)(Object(j.a)(Object(j.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{isDragging:n.isDragging,draggableStyle:e.draggableProps.style,children:Object(H.jsxs)(Z,{children:[Object(H.jsxs)("div",{children:[Object(H.jsxs)(T,{bold:!0,children:[t.departureTime," ",N(t)]}),Object(H.jsx)(T,{children:q(t)})]}),Object(H.jsx)(F,{children:Object(H.jsx)(I.a,{onClick:function(e){return function(t){G((function(e){return e.filter((function(e){return e.id!==t.id}))}))}(t)}})})]})}))}},t.id)})),t.placeholder]}))}})}),Object(H.jsx)(M,{onClick:K,children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}),s&&Object(H.jsx)(w.d,{children:s.message})]}),Object(H.jsx)(w.c,{type:"submit",onClick:Q,children:o?Object(H.jsx)(y.a,{type:"ThreeDots",color:"#00BFFF",height:15,width:40}):"edit"===u?Object(H.jsx)(L.a,{}):Object(H.jsx)(k.a,{})})]})};var B=m.b.div(r||(r=Object(p.a)(["\n  position: relative;\n  padding: 10px 20px;\n  max-width: 420px;\n  margin: 0 auto 20px;\n"]))),U=m.b.h2(a||(a=Object(p.a)(["\n  font-size: 24px;\n  text-align: center;\n  font-weight: 400;\n"]))),D=m.b.p(c||(c=Object(p.a)(["\n  font-size: 18px;\n  text-align: center;\n  margin-bottom: 20px;\n"]))),M=m.b.button(i||(i=Object(p.a)(["\n  min-width: ",";\n  display: block;\n  padding: 6px 20px;\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: 4px;\n  color: ",";\n  cursor: pointer;\n  box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\n  font-size: 18px;\n  transition: background-color 200ms linear;\n  text-align: center;\n  width: 80%;\n  margin: 0 auto;\n  &:hover {\n    background-color: #e6eb00;\n    transition: background-color 200ms linear;\n  }\n"])),(function(t){return t.width?t.width:null}),(function(t){return t.theme.mainColor}),(function(t){return t.theme.mainColor}),(function(t){return t.theme.textColorLight})),V=m.b.li(o||(o=Object(p.a)(["\n  ",";\n  user-select: 'none';\n  padding: 0 0 10px 14px;\n  border-left: 1px solid;\n  position: relative;\n  cursor: move;\n  background: ",";\n\n  &:last-child {\n    border: none;\n  }\n  &::before {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 16px;\n    height: 16px;\n    content: '';\n    border-radius: 50%;\n    border: 1px solid;\n    background-color: #c4c4c4;\n    transform: translate(-50%);\n  }\n  /* & div:first-child {\n    margin-top: -6px;\n  } */\n"])),(function(t){return t.draggableStyle}),(function(t){return t.isDragging?"rgba(255, 251, 2, 0.4)":"transparent"})),Z=m.b.div(u||(u=Object(p.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),F=m.b.div(s||(s=Object(p.a)(["\n  padding: 12px;\n  cursor: pointer;\n"]))),T=m.b.p(l||(l=Object(p.a)(["\n  font-size: 18px;\n  font-weight: ",";\n"])),(function(t){return t.bold?700:400}))}}]);
//# sourceMappingURL=13.920752e0.chunk.js.map
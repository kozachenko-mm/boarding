{"version":3,"sources":["images/arrowBack.svg","redux/trips/tripsSelectors.js","components/TripsContainer/TripHeader.js","redux/trips/tripsOperations.js","images/next.svg","pages/TripEditPage.js"],"names":["_path","_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgArrowBack","_ref","svgRef","title","titleId","props","width","height","viewBox","fill","xmlns","ref","id","d","ForwardRef","getTrips","state","trips","getTrip","trip","getPeriods","period","getRoute","route","getTypeTrip","typeTrip","getLoader","loader","getError","error","getPeriodTimes","createSelector","periods","find","el","getPeriodDays","getCurrentStop","currentStop","stop","locality","parent","getTariffsArray","tariff","tariffs","reduce","arr","fromArray","acc","item","ind","some","fromId","toId","findIndex","push","value","TripHeader","onGoBack","name","Header","onClick","style","cursor","Title","to","styled","div","prop","theme","mainColor","p","axios","defaults","baseURL","getAllTrips","dispatch","getState","a","auth","globalSelectors","tripsLoader","headers","Authorization","data","allTrips","tripsError","getTripId","tripId","getTripPeriod","tripPeriod","getTripRoute","tripRoute","getTripTarrif","tripTariff","getTripRouteAndTariff","SvgNext","TripEditPage","useDispatch","URLSearchParams","useLocation","search","get","useSelector","getTripInfo","useCallback","useEffect","type","color","message","Container","StyledLink","Text","pathname","from","h2","Link"],"mappings":"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","file":"static/js/19.c4d09cc6.chunk.js","sourcesContent":["var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgArrowBack(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 30,\n    height: 20,\n    viewBox: \"0 0 30 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M30 8.33333H6.38333L12.35 2.35L10 0L0 10L10 20L12.35 17.65L6.38333 11.6667H30V8.33333Z\",\n    fill: \"#7E7070\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgArrowBack);\nexport default __webpack_public_path__ + \"static/media/arrowBack.beea4bf3.svg\";\nexport { ForwardRef as ReactComponent };","import { createSelector } from 'reselect'\r\n\r\nexport const getTrips = state => state.trips.trips\r\nexport const getTrip = state => state.trips.trip\r\nexport const getPeriods = state => state.trips.period\r\nexport const getRoute = state => state.trips.route\r\nexport const getTariff = state => state.trips.tariff\r\nexport const currentStop = state => state.trips.currentStop\r\nexport const getTypeTrip = state => state.trips.typeTrip\r\nexport const getLoader = state => state.trips.loader\r\nexport const getError = state => state.trips.error\r\n\r\nexport const getPeriodTimes = createSelector(getPeriods, periods => {\r\n  if (periods) {\r\n    return periods.find(el => el.hasOwnProperty('times'))\r\n  }\r\n})\r\n\r\nexport const getPeriodDays = createSelector(getPeriods, periods => {\r\n  if (periods) {\r\n    return periods.find(el => el.hasOwnProperty('days'))\r\n  }\r\n})\r\n\r\nexport const getCurrentStop = createSelector(getRoute, currentStop, (route, stop) => {\r\n  return stop ? stop : route[0]?.locality.parent.id\r\n})\r\n\r\nexport const getTariffsArray = createSelector(getRoute, getTariff, (route, tariffs) => {\r\n  if (route.length > 0) {\r\n    return route.reduce(\r\n      (arr, el) => {\r\n        const fromArray = route.reduce((acc, item, ind) => {\r\n          if (el.locality.parent.id !== item.locality.parent.id) {\r\n            if (\r\n              !tariffs.some(\r\n                i =>\r\n                  i.fromId === el.locality.parent.id &&\r\n                  i.toId === route[ind].locality.parent.id\r\n              )\r\n            )\r\n              if (\r\n                route.findIndex(i => i.locality.parent.id === el.locality.parent.id) <=\r\n                ind\r\n              )\r\n                acc.push({\r\n                  fromId: el.locality.parent.id,\r\n                  toId: route[ind].locality.parent.id,\r\n                  value: '',\r\n                })\r\n          }\r\n          return acc\r\n        }, [])\r\n        arr.push(...fromArray)\r\n        return arr\r\n      },\r\n      [...tariffs]\r\n    )\r\n  }\r\n  return []\r\n})\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Link } from 'react-router-dom'\r\nimport { ReactComponent as CloseIcon } from '../../images/close.svg'\r\nimport { ReactComponent as ArrowBackIcon } from '../../images/arrowBack.svg'\r\n\r\nconst TripHeader = ({ onGoBack, name = null }) => {\r\n  return (\r\n    <Header>\r\n      <div>\r\n        {onGoBack && <ArrowBackIcon onClick={onGoBack} style={{ cursor: 'pointer' }} />}\r\n        <Title>Рейс {name}</Title>\r\n      </div>\r\n      <Link to=\"/trips\">\r\n        <CloseIcon />\r\n      </Link>\r\n    </Header>\r\n  )\r\n}\r\n\r\nexport default TripHeader\r\n\r\nconst Header = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  background-color: ${prop => prop.theme.mainColor};\r\n  padding: 12.4px 24px;\r\n  & div {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n`\r\n\r\nconst Title = styled.p`\r\n  font-size: 24px;\r\n  padding-left: 12px;\r\n`\r\n","import axios from 'axios'\r\nimport * as globalSelectors from '../global/globalSelectors'\r\nimport {\r\n  allTrips,\r\n  tripId,\r\n  tripPeriod,\r\n  tripRoute,\r\n  tripsError,\r\n  tripsLoader,\r\n  tripTariff,\r\n} from './tripsActions'\r\n\r\naxios.defaults.baseURL = 'https://car.busis.eu'\r\n\r\nexport const getAllTrips = () => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(tripsLoader())\r\n  try {\r\n    const { data } = await axios('/api/trip/all', {\r\n      headers: { Authorization: auth },\r\n    })\r\n    dispatch(allTrips(data))\r\n  } catch (error) {\r\n    dispatch(tripsError(error))\r\n  }\r\n}\r\n\r\nexport const getTripId = id => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(tripsLoader())\r\n  try {\r\n    const { data } = await axios(`/api/trip?tripId=${id}`, {\r\n      headers: { Authorization: auth },\r\n    })\r\n    dispatch(tripId(data))\r\n  } catch (error) {\r\n    dispatch(tripsError(error))\r\n  }\r\n}\r\n\r\nexport const getTripPeriod = id => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(tripsLoader())\r\n  try {\r\n    const { data } = await axios(`/api/trip/period?tripId=${id}`, {\r\n      headers: { Authorization: auth },\r\n    })\r\n    dispatch(tripPeriod(data))\r\n  } catch (error) {\r\n    dispatch(tripsError(error))\r\n  }\r\n}\r\n\r\nexport const getTripRoute = id => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(tripsLoader())\r\n  try {\r\n    const { data } = await axios(`/api/trip/route?tripId=${id}`, {\r\n      headers: { Authorization: auth },\r\n    })\r\n    dispatch(tripRoute(data))\r\n  } catch (error) {\r\n    dispatch(tripsError(error))\r\n  }\r\n}\r\n\r\nexport const getTripTarrif = id => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(tripsLoader())\r\n  try {\r\n    const { data } = await axios(`/api/trip/tariff?tripId=${id}`, {\r\n      headers: { Authorization: auth },\r\n    })\r\n    dispatch(tripTariff(data))\r\n  } catch (error) {\r\n    dispatch(tripsError(error))\r\n  }\r\n}\r\n\r\nexport const getTripRouteAndTariff = id => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(tripsLoader())\r\n  try {\r\n    const route = await axios(`/api/trip/route?tripId=${id}`, {\r\n      headers: { Authorization: auth },\r\n    })\r\n    const tariff = await axios(`/api/trip/tariff?tripId=${id}`, {\r\n      headers: { Authorization: auth },\r\n    })\r\n    dispatch(tripRoute(route.data))\r\n    dispatch(tripTariff(tariff.data))\r\n  } catch (error) {\r\n    dispatch(tripsError(error))\r\n  }\r\n}\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgNext(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 13,\n    height: 22,\n    viewBox: \"0 0 13 22\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.5 0.5L0.0325012 2.9675L8.0475 11L0.0325012 19.0325L2.5 21.5L13 11L2.5 0.5Z\",\n    fill: \"#7E7070\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgNext);\nexport default __webpack_public_path__ + \"static/media/next.8cc89455.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useEffect, useCallback } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Link, useLocation } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport { ReactComponent as NextIcon } from '../images/next.svg'\r\nimport TripHeader from '../components/TripsContainer/TripHeader'\r\nimport { getTripId } from '../redux/trips/tripsOperations'\r\nimport { getError, getLoader, getTrip } from '../redux/trips/tripsSelectors'\r\nimport Loading from '../components/Loader'\r\nimport { ErrorText, LoaderBox } from '../stylesheets/mainStyled'\r\n\r\nconst useQuery = () => {\r\n  return new URLSearchParams(useLocation().search)\r\n}\r\nconst TripEditPage = () => {\r\n  const dispatch = useDispatch()\r\n  const query = useQuery()\r\n  const id = query.get('tripId')\r\n  const trip = useSelector(getTrip)\r\n  const loader = useSelector(getLoader)\r\n  const error = useSelector(getError)\r\n\r\n  const getTripInfo = useCallback(id => dispatch(getTripId(id)), [dispatch])\r\n  useEffect(() => {\r\n    getTripInfo(id)\r\n  }, [getTripInfo, id])\r\n\r\n  return (\r\n    <>\r\n      <TripHeader />\r\n      {loader && (\r\n        <LoaderBox>\r\n          <Loading type=\"Oval\" color=\"#00BFFF\" height={200} width={200} />\r\n        </LoaderBox>\r\n      )}\r\n      {error && <ErrorText>{error.message}</ErrorText>}\r\n      {trip && (\r\n        <Container>\r\n          <Title>{trip.name}</Title>\r\n          <StyledLink to=\"/trip-main\">\r\n            <Text>Детали</Text>\r\n            <NextIcon />\r\n          </StyledLink>\r\n          <StyledLink\r\n            to={{\r\n              pathname: `/trip-periods`,\r\n              search: `?tripId=${trip.id}`,\r\n              state: { from: `/trip-edit?tripId=${trip.id}` },\r\n            }}\r\n          >\r\n            <Text>Расписание</Text>\r\n            <NextIcon />\r\n          </StyledLink>\r\n          <StyledLink\r\n            to={{\r\n              pathname: `/trip-route`,\r\n              search: `?tripId=${trip.id}`,\r\n              state: { from: `/trip-edit?tripId=${trip.id}` },\r\n            }}\r\n          >\r\n            <Text>Маршрут</Text>\r\n            <NextIcon />\r\n          </StyledLink>\r\n          <StyledLink\r\n            to={{\r\n              pathname: `/trip-tariff`,\r\n              search: `?tripId=${trip.id}`,\r\n              state: { from: `/trip-edit?tripId=${trip.id}` },\r\n            }}\r\n          >\r\n            <Text>Стоимость</Text>\r\n            <NextIcon />\r\n          </StyledLink>\r\n        </Container>\r\n      )}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default TripEditPage\r\nconst Container = styled.div`\r\n  padding: 40px 20px;\r\n  text-align: center;\r\n`\r\n\r\nconst Title = styled.h2`\r\n  font-size: 24px;\r\n  margin-bottom: 40px;\r\n`\r\nconst StyledLink = styled(Link)`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  width: 300px;\r\n\r\n  margin: 0 auto 20px;\r\n`\r\nconst Text = styled.p`\r\n  font-size: 18px;\r\n`\r\n"],"sourceRoot":""}
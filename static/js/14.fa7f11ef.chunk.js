(this.webpackJsonpdispetcher=this.webpackJsonpdispetcher||[]).push([[14],{309:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r,a=n(0),c=["title","titleId"];function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function u(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},c=Object.keys(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function o(t,e){var n=t.title,o=t.titleId,l=u(t,c);return a.createElement("svg",i({width:31,height:24,viewBox:"0 0 31 24",xmlns:"http://www.w3.org/2000/svg",fill:"#7E7070",ref:e,"aria-labelledby":o},l),n?a.createElement("title",{id:o},n):null,r||(r=a.createElement("path",{d:"M10.5254 17.4302L4.4849 11.3897L4.13134 11.0362L3.77779 11.3897L1.64645 13.5211L1.29289 13.8746L1.64645 14.2282L10.1718 22.7536L10.5254 23.1071L10.8789 22.7536L29.1476 4.4849L29.5011 4.13134L29.1476 3.77779L27.0162 1.64645L26.6627 1.29289L26.3091 1.64645L10.5254 17.4302Z",stroke:"#7E7070"})))}var l=a.forwardRef(o);n.p},311:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r,a=n(0),c=["title","titleId"];function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function u(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},c=Object.keys(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function o(t,e){var n=t.title,o=t.titleId,l=u(t,c);return a.createElement("svg",i({width:30,height:20,viewBox:"0 0 30 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":o},l),n?a.createElement("title",{id:o},n):null,r||(r=a.createElement("path",{d:"M30 8.33333H6.38333L12.35 2.35L10 0L0 10L10 20L12.35 17.65L6.38333 11.6667H30V8.33333Z",fill:"#7E7070"})))}var l=a.forwardRef(o);n.p},315:function(t,e,n){"use strict";n.d(e,"i",(function(){return c})),n.d(e,"h",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"j",(function(){return l})),n.d(e,"c",(function(){return p})),n.d(e,"b",(function(){return s})),n.d(e,"e",(function(){return f})),n.d(e,"d",(function(){return d})),n.d(e,"a",(function(){return b})),n.d(e,"g",(function(){return j}));var r=n(12),a=n(94),c=function(t){return t.trips.trips},i=function(t){return t.trips.trip},u=function(t){return t.trips.period},o=function(t){return t.trips.route},l=function(t){return t.trips.typeTrip},p=function(t){return t.trips.loader},s=function(t){return t.trips.error},f=Object(a.a)(u,(function(t){if(t)return t.find((function(t){return t.hasOwnProperty("times")}))})),d=Object(a.a)(u,(function(t){if(t)return t.find((function(t){return t.hasOwnProperty("days")}))})),b=Object(a.a)(o,(function(t){return t.trips.currentStop}),(function(t,e){var n;return e||(null===(n=t[0])||void 0===n?void 0:n.locality.parent.id)})),j=Object(a.a)(o,(function(t){return t.trips.tariff}),(function(t,e){return t.length>0?t.reduce((function(n,a){var c=t.reduce((function(n,r,c){return a.locality.parent.id!==r.locality.parent.id&&(e.some((function(e){return e.fromId===a.locality.parent.id&&e.toId===t[c].locality.parent.id}))||t.findIndex((function(t){return t.locality.parent.id===a.locality.parent.id}))<=c&&n.push({fromId:a.locality.parent.id,toId:t[c].locality.parent.id,value:""})),n}),[]);return n.push.apply(n,Object(r.a)(c)),n}),Object(r.a)(e)):[]}))},319:function(t,e,n){"use strict";var r,a,c=n(5),i=(n(0),n(4)),u=n(31),o=n(91),l=n(311),p=n(1);e.a=function(t){var e=t.onGoBack,n=t.name,r=void 0===n?null:n;return Object(p.jsxs)(s,{children:[Object(p.jsxs)("div",{children:[e&&Object(p.jsx)(l.a,{onClick:e,style:{cursor:"pointer"}}),Object(p.jsxs)(f,{children:["\u0420\u0435\u0439\u0441 ",r]})]}),Object(p.jsx)(u.b,{to:"/trips",children:Object(p.jsx)(o.a,{})})]})};var s=i.b.div(r||(r=Object(c.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: ",";\n  padding: 12.4px 24px;\n  & div {\n    display: flex;\n    align-items: center;\n  }\n"])),(function(t){return t.theme.mainColor})),f=i.b.p(a||(a=Object(c.a)(["\n  font-size: 24px;\n  padding-left: 12px;\n"])))},323:function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return d})),n.d(e,"f",(function(){return b})),n.d(e,"e",(function(){return j}));var r=n(70),a=n.n(r),c=n(89),i=n(7),u=n.n(i),o=n(42),l=n(93);u.a.defaults.baseURL="https://car.busis.eu";var p=function(){return function(){var t=Object(c.a)(a.a.mark((function t(e,n){var r,c,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o.a(n())){t.next=3;break}return t.abrupt("return");case 3:return e(Object(l.n)()),t.prev=4,t.next=7,u()("/api/trip/all",{headers:{Authorization:r}});case 7:c=t.sent,i=c.data,e(Object(l.c)(i)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),e(Object(l.m)(t.t0));case 15:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e,n){return t.apply(this,arguments)}}()},s=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n,r){var c,i,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=o.a(r())){e.next=3;break}return e.abrupt("return");case 3:return n(Object(l.n)()),e.prev=4,e.next=7,u()("/api/trip?tripId=".concat(t),{headers:{Authorization:c}});case 7:i=e.sent,p=i.data,n(Object(l.i)(p)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),n(Object(l.m)(e.t0));case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,n){return e.apply(this,arguments)}}()},f=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n,r){var c,i,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=o.a(r())){e.next=3;break}return e.abrupt("return");case 3:return n(Object(l.n)()),e.prev=4,e.next=7,u()("/api/trip/period?tripId=".concat(t),{headers:{Authorization:c}});case 7:i=e.sent,p=i.data,n(Object(l.j)(p)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),n(Object(l.m)(e.t0));case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,n){return e.apply(this,arguments)}}()},d=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n,r){var c,i,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=o.a(r())){e.next=3;break}return e.abrupt("return");case 3:return n(Object(l.n)()),e.prev=4,e.next=7,u()("/api/trip/route?tripId=".concat(t),{headers:{Authorization:c}});case 7:i=e.sent,p=i.data,n(Object(l.k)(p)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),n(Object(l.m)(e.t0));case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,n){return e.apply(this,arguments)}}()},b=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n,r){var c,i,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=o.a(r())){e.next=3;break}return e.abrupt("return");case 3:return n(Object(l.n)()),e.prev=4,e.next=7,u()("/api/trip/tariff?tripId=".concat(t),{headers:{Authorization:c}});case 7:i=e.sent,p=i.data,n(Object(l.l)(p)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),n(Object(l.m)(e.t0));case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,n){return e.apply(this,arguments)}}()},j=function(t){return function(){var e=Object(c.a)(a.a.mark((function e(n,r){var c,i,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=o.a(r())){e.next=3;break}return e.abrupt("return");case 3:return n(Object(l.n)()),e.prev=4,e.next=7,u()("/api/trip/route?tripId=".concat(t),{headers:{Authorization:c}});case 7:return i=e.sent,e.next=10,u()("/api/trip/tariff?tripId=".concat(t),{headers:{Authorization:c}});case 10:p=e.sent,n(Object(l.k)(i.data)),n(Object(l.l)(p.data)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),n(Object(l.m)(e.t0));case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t,n){return e.apply(this,arguments)}}()}},431:function(t,e,n){"use strict";n.r(e);var r,a=n(5),c=n(70),i=n.n(c),u=n(89),o=n(29),l=n(0),p=n(21),s=n(13),f=n(4),d=n(92),b=n(88),j=n(309),h=["title","titleId"];function O(){return(O=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function v(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},c=Object.keys(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function x(t,e){var n=t.title,a=t.titleId,c=v(t,h);return l.createElement("svg",O({width:74,height:77,viewBox:"0 0 74 77",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":a},c),n?l.createElement("title",{id:a},n):null,r||(r=l.createElement("path",{d:"M41.2368 18.9818L41.2368 19.4818L41.2368 18.9818ZM46.2345 23.8319L46.7343 23.8169L46.2345 23.8319ZM46.6097 36.3386L47.1096 36.3452L47.1098 36.3344L47.1095 36.3236L46.6097 36.3386ZM45.7308 76.3489C45.9235 76.5467 46.24 76.5508 46.4378 76.3582L49.6613 73.2182C49.8591 73.0255 49.8633 72.709 49.6706 72.5112C49.4779 72.3134 49.1613 72.3092 48.9635 72.5019L46.0982 75.2929L43.3072 72.4276C43.1145 72.2298 42.7979 72.2257 42.6001 72.4184C42.4023 72.611 42.3982 72.9276 42.5908 73.1254L45.7308 76.3489ZM7.77496 19.4816L41.2368 19.4818L41.2368 18.4818L7.77497 18.4816L7.77496 19.4816ZM45.7347 23.8469L46.1099 36.3536L47.1095 36.3236L46.7343 23.8169L45.7347 23.8469ZM46.1097 36.332L45.589 75.9934L46.5889 76.0066L47.1096 36.3452L46.1097 36.332ZM41.2368 19.4818C43.6695 19.4818 45.6618 21.4152 45.7347 23.8469L46.7343 23.8169C46.6451 20.8449 44.2101 18.4818 41.2368 18.4818L41.2368 19.4818Z",fill:"black"})))}var m,y=l.forwardRef(x),g=(n.p,["title","titleId"]);function w(){return(w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function L(t,e){if(null==t)return{};var n,r,a=function(t,e){if(null==t)return{};var n,r,a={},c=Object.keys(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(r=0;r<c.length;r++)n=c[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function k(t,e){var n=t.title,r=t.titleId,a=L(t,g);return l.createElement("svg",w({width:9,height:46,viewBox:"0 0 9 46",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:e,"aria-labelledby":r},a),n?l.createElement("title",{id:r},n):null,m||(m=l.createElement("path",{d:"M4.13534 45.3595C4.3306 45.5548 4.64718 45.5548 4.84244 45.3595L8.02443 42.1776C8.21969 41.9823 8.21969 41.6657 8.02443 41.4705C7.82916 41.2752 7.51258 41.2752 7.31732 41.4705L4.48889 44.2989L1.66046 41.4705C1.4652 41.2752 1.14862 41.2752 0.953358 41.4705C0.758096 41.6657 0.758096 41.9823 0.953358 42.1776L4.13534 45.3595ZM3.98889 0.994629L3.98889 45.006H4.98889L4.98889 0.994629H3.98889Z",fill:"black"})))}var I,E,C,P,M,Z,z,S=l.forwardRef(k),A=(n.p,n(42)),R=n(319),B=n(93),T=n(315),F=n(323),U=n(90),H=n(1),G=(e.default=function(){var t=Object(p.c)(),e=Object(s.g)(),n=Object(s.h)(),r=new URLSearchParams(Object(s.h)().search).get("tripId"),a=Object(p.d)(A.b),c=Object(p.d)(T.h),f=Object(p.d)(T.f),h=Object(p.d)(T.c),O=Object(p.d)(T.j),v=Object(p.d)(T.b),x=Object(p.d)(A.a),m=Object(p.d)(T.a),g=Object(p.d)(T.g),w=Object(l.useCallback)((function(e){return t(Object(F.f)(e))}),[t]),L=Object(l.useCallback)((function(e){return t(Object(F.d)(e))}),[t]),k=Object(l.useCallback)((function(e){return t(Object(F.e)(e))}),[t]);Object(l.useEffect)((function(){"create"!==O&&(c.emptyTariff&&f.length>0||(c.emptyTariff&&f.length<=0&&L(r),!c.emptyTariff&&f.length>0&&w(r),!c.emptyTariff&&f.length<=0&&k(r)))}),[]);var I=function(t){return t.locality.parent.name[a]||t.locality.parent.name.RU||t.locality.parent.name.UA||t.locality.parent.name.EN||t.locality.parent.name.PL},E=function(e){var n=e.target,r=g.reduce((function(t,e){return t.push(e.toId===n.name&&e.fromId===m?Object(o.a)(Object(o.a)({},e),{},{toId:n.name,value:+n.value}):e),t}),[]);t(Object(B.d)(r))},C=function(){var n=Object(u.a)(i.a.mark((function n(){var a,c,u;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=f.map((function(t){return t.locality.parent.id})),t(Object(B.n)()),n.prev=2,c=g.filter((function(t){return t.value&&a.includes(t.fromId)&&a.includes(t.toId)})),n.next=6,Object(U.d)(c,r,x);case 6:u=n.sent,u.data&&(t(Object(B.l)([])),t(Object(B.g)("")),"edit"===O?e.push({pathname:"trip-edit",search:"?tripId=".concat(r)}):e.push("/trips")),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(2),t(Object(B.m)(n.t0));case 14:case"end":return n.stop()}}),n,null,[[2,11]])})));return function(){return n.apply(this,arguments)}}();return Object(H.jsxs)(H.Fragment,{children:[Object(H.jsx)(R.a,{onGoBack:function(){t(Object(B.g)("")),t(Object(B.l)([])),t(Object(B.m)(null)),e.push(n.state.from)},name:c.name}),Object(H.jsxs)(G,{children:[Object(H.jsx)(J,{children:"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c"}),Object(H.jsx)(D,{children:"(\u043f\u0440\u0438 \u0432\u044b\u0431\u043e\u0440\u0435 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0430\u0435\u0442\u0441\u044f \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0438\u043c\u0435\u043d\u043d\u043e \u0441 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0439 \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438)"}),f.length>0&&Object(H.jsx)("ul",{children:f.map((function(e,n){var r;return Object(H.jsxs)(N,{children:[Object(H.jsxs)("div",{onClick:function(n){return function(e){t(Object(B.g)(e.locality.parent.id))}(e)},children:[Object(H.jsxs)(q,{bold:!0,children:[e.departureTime," ",I(e)]}),Object(H.jsx)(q,{children:e.locality.address.RU})]}),g.length>0&&Object(H.jsxs)(H.Fragment,{children:[f.findIndex((function(t){return t.locality.parent.id===m}))<n&&Object(H.jsxs)(V,{children:[Object(H.jsx)("input",{type:"number",name:e.locality.parent.id,value:null===(r=g.find((function(t){return t.fromId===m&&t.toId===e.locality.parent.id})))||void 0===r?void 0:r.value,onChange:E}),f.length-1!==n&&Object(H.jsx)(S,{})]}),f.findIndex((function(t){return t.locality.parent.id===m}))===n&&f.length-1!==n&&Object(H.jsx)(K,{children:Object(H.jsx)(y,{})}),f.findIndex((function(t){return t.locality.parent.id===m}))>n&&Object(H.jsx)(V,{})]})]},n)}))}),v&&Object(H.jsx)(b.d,{children:v.message})]}),Object(H.jsx)(b.c,{type:"submit",onClick:C,children:h?Object(H.jsx)(d.a,{type:"ThreeDots",color:"#00BFFF",height:15,width:40}):Object(H.jsx)(j.a,{})})]})},f.b.div(I||(I=Object(a.a)(["\n  padding: 10px 20px 80px;\n  & > ul {\n    max-width: 420px;\n    margin: 0 auto;\n  }\n"])))),J=f.b.h2(E||(E=Object(a.a)(["\n  font-size: 24px;\n  text-align: center;\n  font-weight: 400;\n"]))),D=f.b.p(C||(C=Object(a.a)(["\n  font-size: 18px;\n  text-align: center;\n  margin-bottom: 20px;\n"]))),N=f.b.li(P||(P=Object(a.a)(["\n  padding: 0 0 10px 14px;\n  border-left: 1px solid;\n  position: relative;\n  cursor: pointer;\n  /* max-width: 80%; */\n  display: flex;\n  justify-content: space-between;\n  &:last-child {\n    border: 1px solid #fff;\n  }\n  &::before {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 16px;\n    height: 16px;\n    content: '';\n    border-radius: 50%;\n    border: 1px solid;\n    background-color: #c4c4c4;\n    transform: translate(-9px);\n  }\n  /* & p:first-child {\n    margin-top: -6px;\n  } */\n  & > div {\n    margin-right: 20px;\n  }\n  & > div:last-child {\n    margin-right: 0px;\n  }\n"]))),V=f.b.div(M||(M=Object(a.a)(["\n  padding-left: 10px;\n  width: 80px;\n  text-align: center;\n\n  & input {\n    width: 100%;\n    text-align: center;\n    margin-bottom: 6px;\n  }\n  /* cursor: pointer; */\n"]))),q=f.b.p(Z||(Z=Object(a.a)(["\n  font-size: 18px;\n  font-weight: ",";\n"])),(function(t){return t.bold?700:400})),K=f.b.div(z||(z=Object(a.a)(["\n  width: 80px;\n  margin-left: -20px;\n"])))}}]);
//# sourceMappingURL=14.fa7f11ef.chunk.js.map
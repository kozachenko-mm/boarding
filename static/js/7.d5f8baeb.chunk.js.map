{"version":3,"sources":["images/check.svg","images/arrowBack.svg","components/FormikInputs/TextInput.js","components/Modal.js","redux/schedule/scheduleSelectors.js","redux/schedule/scheduleActions.js","services/useCustomQuery.js","redux/schedule/scheduleOperations.js","components/ButtonAdd.js","redux/vehicles/vehiclesActions.js","redux/vehicles/vehiclesSelectors.js","components/AddVehicle.js","components/ScheduleContainer/Vehicle.js","pages/BusesPage.js"],"names":["_path","_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgCheck","_ref","svgRef","title","titleId","props","width","height","viewBox","xmlns","fill","ref","id","d","stroke","ForwardRef","SvgArrowBack","TextInput","label","useField","field","meta","error","touched","htmlFor","name","Modal","open","onClose","children","editRef","useRef","in","timeout","classNames","unmountOnExit","nodeRef","onClick","event","current","getSchedule","state","schedule","getCrew","crew","getbuses","buses","getPassengers","passengers","getFormatSchedule","createSelector","trip","amountDays","moment","departure","endOf","format","arr","day","slice","date","some","el","push","trips","filter","sort","a","b","Date","split","join","getTime","isTrips","without","scheduleMonth","data","type","Types","GET_SCHEDULE","payload","crewAll","GET_CREW","currentTrip","bus","CURRENT_TRIP","busesAll","GET_BUSES","removeBusId","DELETE_BUS","includeTrip","INCLUDE_TRIP","excludeTrip","EXCLUDE_TRIP","passangersAll","GET_PASSENGERS","scheduleLoader","SCHEDULE_LOADER_START","scheduleError","SCHEDULE_ERROR","useQuery","URLSearchParams","useLocation","search","axios","defaults","baseURL","getScheduleMonth","from","to","dispatch","getState","auth","globalSelectors","headers","Authorization","getCrewAll","getBusesAll","tripId","getPassengersAll","ButtonAdd","click","Button","styled","button","prop","theme","mainColor","textColorLight","vehiclesAll","GET_VEHICLES_ALL","vehicleId","GET_VEHICLE_ID","editVehicleId","EDIT_VEHICLE","addVehicleId","ADD_VEHICLE","removeVehicleId","REMOVE_VEHICLE","vehiclesError","err","VEHICLES_ERROR","vehiclesLoader","START_VEHICLES_LOADER","getVehiclesAll","vehicles","getVehicleId","vehicle","getVehiclesLoader","loader","getVehiclesError","AddVehicle","useDispatch","useSelector","getAuth","Container","Header","Title","initialValues","model","number","capacity","validationSchema","Yup","required","onSubmit","addVehicle","FormBox","TextError","color","div","device","tablet","p","warningColor","Vehicle","history","useHistory","toAppoint","toAppointBus","status","Card","BusNumber","Text","location","border","BusesPage","query","get","find","useState","isAdd","setIsAdd","busesInfo","useCallback","useEffect","toggleOpenModalAdd","List","map","header","ul"],"mappings":"0GAAA,sCAAIA,EAAJ,OAEIC,EAAY,CAAC,QAAS,WAE1B,SAASC,IAA2Q,OAA9PA,EAAWC,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAASS,EAAyBP,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxMgB,CAA8BZ,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,SAASoB,EAASC,EAAMC,GACtB,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQd,EAAyBU,EAAMzB,GAE3C,OAAoB,gBAAoB,MAAOC,EAAS,CACtD6B,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTC,MAAO,6BACPC,KAAM,UACNC,IAAKT,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DS,GAAIR,GACHD,GAAS,KAAM5B,IAAUA,EAAqB,gBAAoB,OAAQ,CAC3EsC,EAAG,kRACHC,OAAQ,cAIZ,IAAIC,EAA0B,aAAiBf,GAChC,K,iCClCf,sCAAIzB,EAAJ,OAEIC,EAAY,CAAC,QAAS,WAE1B,SAASC,IAA2Q,OAA9PA,EAAWC,OAAOC,QAAU,SAAUC,GAAU,IAAK,IAAIC,EAAI,EAAGA,EAAIC,UAAUC,OAAQF,IAAK,CAAE,IAAIG,EAASF,UAAUD,GAAI,IAAK,IAAII,KAAOD,EAAcN,OAAOQ,UAAUC,eAAeC,KAAKJ,EAAQC,KAAQL,EAAOK,GAAOD,EAAOC,IAAY,OAAOL,IAA2BS,MAAMC,KAAMR,WAEhT,SAASS,EAAyBP,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAAkEC,EAAKJ,EAAnED,EAEzF,SAAuCI,EAAQQ,GAAY,GAAc,MAAVR,EAAgB,MAAO,GAAI,IAA2DC,EAAKJ,EAA5DD,EAAS,GAAQa,EAAaf,OAAOgB,KAAKV,GAAqB,IAAKH,EAAI,EAAGA,EAAIY,EAAWV,OAAQF,IAAOI,EAAMQ,EAAWZ,GAAQW,EAASG,QAAQV,IAAQ,IAAaL,EAAOK,GAAOD,EAAOC,IAAQ,OAAOL,EAFxMgB,CAA8BZ,EAAQQ,GAAuB,GAAId,OAAOmB,sBAAuB,CAAE,IAAIC,EAAmBpB,OAAOmB,sBAAsBb,GAAS,IAAKH,EAAI,EAAGA,EAAIiB,EAAiBf,OAAQF,IAAOI,EAAMa,EAAiBjB,GAAQW,EAASG,QAAQV,IAAQ,GAAkBP,OAAOQ,UAAUa,qBAAqBX,KAAKJ,EAAQC,KAAgBL,EAAOK,GAAOD,EAAOC,IAAU,OAAOL,EAMne,SAASoC,EAAaf,EAAMC,GAC1B,IAAIC,EAAQF,EAAKE,MACbC,EAAUH,EAAKG,QACfC,EAAQd,EAAyBU,EAAMzB,GAE3C,OAAoB,gBAAoB,MAAOC,EAAS,CACtD6B,MAAO,GACPC,OAAQ,GACRC,QAAS,YACTE,KAAM,OACND,MAAO,6BACPE,IAAKT,EACL,kBAAmBE,GAClBC,GAAQF,EAAqB,gBAAoB,QAAS,CAC3DS,GAAIR,GACHD,GAAS,KAAM5B,IAAUA,EAAqB,gBAAoB,OAAQ,CAC3EsC,EAAG,yFACHH,KAAM,cAIV,IAAIK,EAA0B,aAAiBC,GAChC,K,uGCjBAC,IAbG,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,MAAUb,EAAY,iBACzC,EAAsBc,YAASd,GAA/B,mBAAOe,EAAP,KAAcC,EAAd,KACA,OACE,eAAC,IAAD,CAAcC,MAAOD,EAAKE,SAAWF,EAAKC,MAA1C,UACE,uBAAOE,QAASnB,EAAMO,IAAMP,EAAMoB,KAAlC,SAAyCP,IACzC,gCACE,iDAAWE,GAAWf,IACrBgB,EAAKE,SAAWF,EAAKC,MAAQ,4BAAID,EAAKC,QAAa,a,iCCX5D,mCA0BeI,IAtBD,SAAC,GAAiC,IAA/BC,EAA8B,EAA9BA,KAAMC,EAAwB,EAAxBA,QAASC,EAAe,EAAfA,SACxBC,EAAUC,iBAAO,MAMvB,OACE,cAAC,IAAD,CACEC,GAAIL,EACJM,QAAS,IACTC,WAAW,QACXC,eAAa,EACbC,QAASN,EALX,SAOE,cAAC,IAAD,CAAUnB,IAAKmB,EAASO,QAbA,SAAAC,GAC1B,IAAQC,EAAYT,EAAZS,QACJA,GAAWD,EAAM1D,SAAW2D,GAChCX,KAUE,SACGC,Q,iCCpBT,wMAGaW,EAAc,SAAAC,GAAK,OAAIA,EAAMC,SAASA,UACtCC,EAAU,SAAAF,GAAK,OAAIA,EAAMC,SAASE,MAElCC,EAAW,SAAAJ,GAAK,OAAIA,EAAMC,SAASI,OACnCC,EAAgB,SAAAN,GAAK,OAAIA,EAAMC,SAASM,YAExCC,EAAoBC,YAAeV,GAAa,SAAAW,GAI3D,IAHA,IAAMC,EAAaC,IAAOF,EAAK,GAAGG,WAAWC,MAAM,SAASC,OAAO,MAE7DC,EAAM,GAHuD,WAI1D5E,GACP,IAAM6E,EAAM,WAAI7E,GAAI8E,OAAO,GACrBC,EAAI,UAAMP,IAAOF,EAAK,GAAGG,WAAWE,OAAO,WAAvC,YAAqDE,GAC3DP,EAAKU,MAAK,SAAAC,GAAE,OAAIT,IAAOS,EAAGR,WAAWE,OAAO,gBAAkBI,KAChEH,EAAIM,KAAK,CACPH,KAAMA,EACNI,MAAOb,EACJc,QAAO,SAAAH,GAAE,OAAIT,IAAOS,EAAGR,WAAWE,OAAO,gBAAkBI,KAC3DM,MAAK,SAACC,EAAGC,GAGR,OAFU,IAAIC,KAAKF,EAAEb,UAAUgB,MAAM,KAAKC,KAAK,MAAMC,UAC3C,IAAIH,KAAKD,EAAEd,UAAUgB,MAAM,KAAKC,KAAK,MAAMC,aAGzDC,SAAS,IAGXhB,EAAIM,KAAK,CAAEH,KAAMA,EAAMI,MAAO,GAAIS,SAAS,EAAOC,QAAShB,KAhBtD7E,EAAI,EAAGA,GAAKuE,EAAYvE,IAAM,EAA9BA,GAoBT,OAAO4E,M,iCCjCT,+VAEakB,EAAgB,SAAAC,GAAI,MAAK,CAAEC,KAAMC,IAAMC,aAAcC,QAASJ,IAE9DK,EAAU,SAAAL,GAAI,MAAK,CAAEC,KAAMC,IAAMI,SAAUF,QAASJ,IAEpDO,EAAc,SAAChC,EAAMiC,GAAP,MAAgB,CACzCP,KAAMC,IAAMO,aACZL,QAAS,CAAE7B,OAAMiC,SAGNE,EAAW,SAAAV,GAAI,MAAK,CAAEC,KAAMC,IAAMS,UAAWP,QAASJ,IAItDY,EAAc,SAAA5E,GAAE,MAAK,CAAEiE,KAAMC,IAAMW,WAAYT,QAASpE,IAExD8E,EAAc,SAAAd,GAAI,MAAK,CAAEC,KAAMC,IAAMa,aAAcX,QAASJ,IAE5DgB,EAAc,SAAAhB,GAAI,MAAK,CAAEC,KAAMC,IAAMe,aAAcb,QAASJ,IAE5DkB,EAAgB,SAAAlB,GAAI,MAAK,CAAEC,KAAMC,IAAMiB,eAAgBf,QAASJ,IAEhEoB,EAAiB,iBAAO,CAAEnB,KAAMC,IAAMmB,wBAEtCC,EAAgB,SAAAtB,GAAI,MAAK,CAAEC,KAAMC,IAAMqB,eAAgBnB,QAASJ,K,iCCzB7E,8CAEawB,EAAW,WACtB,OAAO,IAAIC,gBAAgBC,cAAcC,U,uOCQ3CC,IAAMC,SAASC,QAAU,uBAElB,IAAMC,EAAmB,SAACC,EAAMC,GAAP,8CAAc,WAAOC,EAAUC,GAAjB,mBAAA5C,EAAA,yDACtC6C,EAAOC,IAAwBF,KADO,wDAG5CD,EAASd,eAHmC,kBAKnBQ,IAAM,sBAAD,OAAuBI,EAAvB,eAAkCC,GAAM,CAClEK,QAAS,CAAEC,cAAeH,KANc,gBAKlCpC,EALkC,EAKlCA,KAGRkC,EAASnC,YAAcC,IARmB,kDAU1CkC,EAASZ,YAAc,EAAD,KAVoB,0DAAd,yDAcnBkB,EAAa,yDAAM,WAAON,EAAUC,GAAjB,mBAAA5C,EAAA,yDACxB6C,EAAOC,IAAwBF,KADP,wDAG9BD,EAASd,eAHqB,kBAKLQ,IAAM,2BAA4B,CACvDU,QAAS,CAAEC,cAAeH,KANA,gBAKpBpC,EALoB,EAKpBA,KAGRkC,EAAS7B,YAAQL,IARW,kDAU5BkC,EAASZ,YAAc,EAAD,KAVM,0DAAN,yDAcbmB,EAAc,SAAC/D,EAAWgE,GAAZ,8CAAuB,WAAOR,EAAUC,GAAjB,mBAAA5C,EAAA,yDAC1C6C,EAAOC,IAAwBF,KADW,wDAGhDD,EAASd,eAHuC,kBAKvBQ,IAAM,4CAAD,OACkBlD,EADlB,mBACsCgE,EADtC,KAE1B,CACEJ,QAAS,CAAEC,cAAeH,KARgB,gBAKtCpC,EALsC,EAKtCA,KAMRkC,EAASxB,YAASV,IAX4B,kDAa9CkC,EAASZ,YAAc,EAAD,KAbwB,0DAAvB,yDAiBdqB,EAAmB,SAACjE,EAAWgE,GAAZ,8CAAuB,WAAOR,EAAUC,GAAjB,mBAAA5C,EAAA,yDAC/C6C,EAAOC,IAAwBF,KADgB,wDAGrDD,EAASd,eAH4C,kBAK5BQ,IAAM,wCAAD,OACclD,EADd,mBACkCgE,EADlC,KAE1B,CACEJ,QAAS,CAAEC,cAAeH,KARqB,gBAK3CpC,EAL2C,EAK3CA,KAMRkC,EAAShB,YAAclB,IAX4B,kDAanDkC,EAASZ,YAAc,EAAD,KAb6B,0DAAvB,0D,mEC/CjBsB,IARG,SAAC,GAAe,IAAbC,EAAY,EAAZA,MACnB,OACE,cAACC,EAAD,CAAQ7C,KAAK,SAASxC,QAASoF,EAA/B,gBAQJ,IAAMC,EAASC,IAAOC,OAAV,kTAQU,SAAAC,GAAI,OAAIA,EAAKC,MAAMC,aAG9B,SAAAF,GAAI,OAAIA,EAAKC,MAAME,mB,iCCxB9B,yPAEaC,EAAc,SAAArD,GAAI,MAAK,CAAEC,KAAMC,IAAMoD,iBAAkBlD,QAASJ,IAEhEuD,EAAY,SAAAvD,GAAI,MAAK,CAAEC,KAAMC,IAAMsD,eAAgBpD,QAASJ,IAE5DyD,EAAgB,SAAAzD,GAAI,MAAK,CAAEC,KAAMC,IAAMwD,aAActD,QAASJ,IAE9D2D,EAAe,SAAA3D,GAAI,MAAK,CAAEC,KAAMC,IAAM0D,YAAaxD,QAASJ,IAE5D6D,EAAkB,SAAA7H,GAAE,MAAK,CAAEiE,KAAMC,IAAM4D,eAAgB1D,QAASpE,IAEhE+H,EAAgB,SAAAC,GAAG,MAAK,CAAE/D,KAAMC,IAAM+D,eAAgB7D,QAAS4D,IAE/DE,EAAiB,iBAAO,CAAEjE,KAAMC,IAAMiE,yB,iCCdnD,wIAAO,IAAMC,EAAiB,SAAAvG,GAAK,OAAIA,EAAMwG,SAASA,UAEzCC,EAAe,SAAAzG,GAAK,OAAIA,EAAMwG,SAASE,SAEvCC,EAAoB,SAAA3G,GAAK,OAAIA,EAAMwG,SAASI,QAE5CC,EAAmB,SAAA7G,GAAK,OAAIA,EAAMwG,SAAS3H,Q,gNCoEzCiI,IAtDI,SAAC,GAAiB,IAAf3H,EAAc,EAAdA,QACdkF,EAAW0C,cACXxC,EAAOyC,YAAYC,KACnBL,EAASI,YAAYL,KACrB9H,EAAQmI,YAAYH,KAC1B,OACE,eAACK,EAAD,WACE,eAACC,EAAD,WACE,cAACC,EAAD,wFACA,cAAC,IAAD,CAAWxH,QAAST,OAEtB,cAAC,IAAD,CACEkI,cAAe,CACbC,MAAO,GACPC,OAAQ,GACRC,SAAU,IAEZC,iBAAkBC,IAAW,CAC3BJ,MAAOI,MAAaC,SAAS,eAC7BJ,OAAQG,MAAaC,SAAS,eAC9BH,SAAUE,MAAaC,SAAS,iBAElCC,SAAQ,uCAAE,uCAAAlG,EAAA,6DAAS4F,EAAT,EAASA,MAAOC,EAAhB,EAAgBA,OAAQC,EAAxB,EAAwBA,SAC1B7E,EAAM,CAAE2E,QAAOC,SAAQC,YAC7BnD,EAASgC,eAFD,kBAIiBwB,YAAWlF,EAAK4B,GAJjC,gBAIEpC,EAJF,EAIEA,KACRkC,EAASyB,YAAa3D,IACtBhD,IANM,kDAQNkF,EAAS6B,YAAc,EAAD,KARhB,0DAAF,sDAXV,SAuBE,cAAC,IAAD,UACE,eAAC4B,EAAD,WACE,cAAC,IAAD,CAAWrJ,MAAM,mDAAWO,KAAK,QAAQoD,KAAK,SAC9C,cAAC,IAAD,CAAW3D,MAAM,mDAAWO,KAAK,SAASoD,KAAK,SAC/C,cAAC,IAAD,CAAW3D,MAAM,6FAAkBO,KAAK,WAAWoD,KAAK,SACvDvD,GAAS,cAACkJ,EAAD,oBACV,cAAC,IAAD,CAAa3F,KAAK,SAAlB,SACGwE,EACC,cAAC,IAAD,CAASxE,KAAK,YAAY4F,MAAM,UAAUlK,OAAQ,GAAID,MAAO,KAE7D,cAAC,IAAD,iBAYhB,IAAMqJ,EAAYhC,IAAO+C,IAAV,2KAKJC,IAAOC,QAKZhB,EAASjC,IAAO+C,IAAV,4JAKU,SAAA7C,GAAI,OAAIA,EAAKC,MAAMC,aAEnC8B,EAAQlC,IAAOkD,EAAV,gDAGLN,EAAU5C,IAAO+C,IAAV,8CAGPF,EAAY7C,IAAOkD,EAAV,2CACJ,SAAAxK,GAAK,OAAIA,EAAMyH,MAAMgD,iB,iQCzDjBC,EAjCC,SAAC,GAAmB,IAAjB3F,EAAgB,EAAhBA,IAAKjC,EAAW,EAAXA,KAChB2D,EAAW0C,cACXwB,EAAUC,cAEVjE,EAAOyC,YAAYC,KACnBwB,EAAS,uCAAG,4BAAA/G,EAAA,+EAEWgH,YACvBhI,EAAKvC,GACLuC,EAAKG,UAAUK,MAAM,EAAG,IACxByB,EAAIxE,GACJoG,GANY,gBAQC,MARD,EAENoE,QAMYJ,EAAQjH,KAAK,YARnB,gDAUd+C,EAASZ,YAAc,EAAD,KAVR,yDAAH,qDAaf,OACE,eAACmF,EAAD,WACE,cAACC,EAAD,UAAYlG,EAAI4E,SAChB,cAACuB,EAAD,UAAOnG,EAAI2E,QACX,eAACwB,EAAD,sEACa,+BAAOnG,EAAI6E,cAEvB7E,EAAIjG,eAAe,aAClB,eAACoM,EAAD,uJAAkCnG,EAAIoG,SAAS/J,KAAb,MAGpC,cAAC,IAAD,CAAQY,QAAS6I,EAAjB,0FAMAG,EAAO1D,IAAO+C,IAAV,gTAGS,SAAA7C,GAAI,OAAIA,EAAKC,MAAM2D,SAC3Bd,IAAOC,QACJ,SAAA/C,GAAI,OAAIA,EAAKC,MAAM2D,UAS3BH,EAAY3D,IAAOkD,EAAV,qLAIH,SAAAhD,GAAI,OAAIA,EAAKC,MAAM2D,UAKzBF,EAAO5D,IAAOkD,EAAV,6FAICF,IAAOC,QCNZjB,GAFS+B,UAjDG,WAChB,IAAM5E,EAAW0C,cACXmC,EAAQvF,cAERkB,EAASqE,EAAMC,IAAI,UACnBtI,EAAYD,IAAOsI,EAAMC,IAAI,cAAcpI,OAAO,cAElDV,EAAQ2G,YAAY5G,KACpBM,EAAOsG,YAAYjH,KAAaqJ,MACpC,SAAA1I,GAAI,OACFA,EAAKvC,KAAO0G,GACZnE,EAAKG,YAAcD,IAAOsI,EAAMC,IAAI,cAAcpI,OAAO,uBAE7D,EAA0BsI,oBAAS,GAAnC,mBAAOC,EAAP,KAAcC,EAAd,KACMhB,EAAUC,cAEVgB,EAAYC,uBAChB,SAAC5I,EAAWgE,GAAZ,OAAuBR,EAASO,YAAY/D,EAAWgE,MACvD,CAACR,IAEHqF,qBAAU,WACRF,EAAU3I,EAAWgE,KACpB,CAAC2E,EAAW3I,EAAWgE,IAE1B,IACM8E,EAAqB,kBAAMJ,GAAUD,IAE3C,OACE,qCACE,eAACpC,EAAD,WACE,cAACnC,EAAA,EAAD,CAAWC,MAAO2E,IAClB,eAACxC,EAAD,WACE,cAAC,IAAD,CAAevH,QANR,kBAAM2I,EAAQjH,KAAK,gBAO1B,eAAC8F,EAAD,WACGxG,IAAOsI,EAAMC,IAAI,cAAcpI,OAAO,SADzC,IACoDL,EAAK1B,WAG3D,cAAC4K,EAAD,UACGvJ,EAAM/D,OAAS,GACd+D,EAAMwJ,KAAI,SAAAlH,GAAG,OAAI,cAAC,EAAD,CAAsBA,IAAKA,EAAKjC,KAAMA,GAAxBiC,EAAIxE,YAGzC,cAACc,EAAA,EAAD,CAAOC,KAAMoK,EAAOnK,QAASwK,EAA7B,SACE,cAAC7C,EAAA,EAAD,CAAY3H,QAnBA,kBAAMoK,GAAUD,YA2BlBpE,IAAO+C,IAAV,oDAITd,EAASjC,IAAO4E,OAAV,yHAGU,SAAA1E,GAAI,OAAIA,EAAKC,MAAMC,aAGnC8B,EAAQlC,IAAOkD,EAAV,uEAILwB,EAAO1E,IAAO6E,GAAV,oGAGC7B,IAAOC","file":"static/js/7.d5f8baeb.chunk.js","sourcesContent":["var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgCheck(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 31,\n    height: 24,\n    viewBox: \"0 0 31 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"#7E7070\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10.5254 17.4302L4.4849 11.3897L4.13134 11.0362L3.77779 11.3897L1.64645 13.5211L1.29289 13.8746L1.64645 14.2282L10.1718 22.7536L10.5254 23.1071L10.8789 22.7536L29.1476 4.4849L29.5011 4.13134L29.1476 3.77779L27.0162 1.64645L26.6627 1.29289L26.3091 1.64645L10.5254 17.4302Z\",\n    stroke: \"#7E7070\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgCheck);\nexport default __webpack_public_path__ + \"static/media/check.fed458a5.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgArrowBack(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 30,\n    height: 20,\n    viewBox: \"0 0 30 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M30 8.33333H6.38333L12.35 2.35L10 0L0 10L10 20L12.35 17.65L6.38333 11.6667H30V8.33333Z\",\n    fill: \"#7E7070\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgArrowBack);\nexport default __webpack_public_path__ + \"static/media/arrowBack.beea4bf3.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react'\r\nimport { TextInputDiv } from '../../stylesheets/mainStyled'\r\nimport { useField } from 'formik'\r\n\r\nconst TextInput = ({ label, ...props }) => {\r\n  const [field, meta] = useField(props)\r\n  return (\r\n    <TextInputDiv error={meta.touched && meta.error}>\r\n      <label htmlFor={props.id || props.name}>{label}</label>\r\n      <div>\r\n        <input {...field} {...props} />\r\n        {meta.touched && meta.error ? <p>{meta.error}</p> : null}\r\n      </div>\r\n    </TextInputDiv>\r\n  )\r\n}\r\n\r\nexport default TextInput\r\n","import React, { useRef } from 'react'\r\nimport { CSSTransition } from 'react-transition-group'\r\nimport { AnimeBox } from '../stylesheets/mainStyled'\r\n\r\nconst Modal = ({ open, onClose, children }) => {\r\n  const editRef = useRef(null)\r\n  const handleBackdropClick = event => {\r\n    const { current } = editRef\r\n    if (current && event.target !== current) return\r\n    onClose()\r\n  }\r\n  return (\r\n    <CSSTransition\r\n      in={open}\r\n      timeout={300}\r\n      classNames=\"scale\"\r\n      unmountOnExit\r\n      nodeRef={editRef}\r\n    >\r\n      <AnimeBox ref={editRef} onClick={handleBackdropClick}>\r\n        {children}\r\n      </AnimeBox>\r\n    </CSSTransition>\r\n  )\r\n}\r\n\r\nexport default Modal\r\n","import moment from 'moment'\r\nimport { createSelector } from 'reselect'\r\n\r\nexport const getSchedule = state => state.schedule.schedule\r\nexport const getCrew = state => state.schedule.crew\r\nexport const getCurrentTrip = state => state.schedule.currentTrip\r\nexport const getbuses = state => state.schedule.buses\r\nexport const getPassengers = state => state.schedule.passengers\r\n\r\nexport const getFormatSchedule = createSelector(getSchedule, trip => {\r\n  const amountDays = moment(trip[0].departure).endOf('month').format('DD')\r\n\r\n  const arr = []\r\n  for (let i = 1; i <= amountDays; i++) {\r\n    const day = `0${i}`.slice(-2)\r\n    const date = `${moment(trip[0].departure).format('YYYY-MM')}-${day}`\r\n    if (trip.some(el => moment(el.departure).format('YYYY-MM-DD') === date)) {\r\n      arr.push({\r\n        date: date,\r\n        trips: trip\r\n          .filter(el => moment(el.departure).format('YYYY-MM-DD') === date)\r\n          .sort((a, b) => {\r\n            const A = new Date(a.departure.split(' ').join('T')).getTime()\r\n            const B = new Date(b.departure.split(' ').join('T')).getTime()\r\n            return A - B\r\n          }),\r\n        isTrips: true,\r\n      })\r\n    } else {\r\n      arr.push({ date: date, trips: [], isTrips: false, without: day })\r\n    }\r\n  }\r\n\r\n  return arr\r\n})\r\n","import { Types } from '../actionTypes'\r\n\r\nexport const scheduleMonth = data => ({ type: Types.GET_SCHEDULE, payload: data })\r\n\r\nexport const crewAll = data => ({ type: Types.GET_CREW, payload: data })\r\n\r\nexport const currentTrip = (trip, bus) => ({\r\n  type: Types.CURRENT_TRIP,\r\n  payload: { trip, bus },\r\n})\r\n\r\nexport const busesAll = data => ({ type: Types.GET_BUSES, payload: data })\r\n\r\nexport const appointBus = id => ({ type: Types.APPOINT_BUS, payload: id })\r\n\r\nexport const removeBusId = id => ({ type: Types.DELETE_BUS, payload: id })\r\n\r\nexport const includeTrip = data => ({ type: Types.INCLUDE_TRIP, payload: data })\r\n\r\nexport const excludeTrip = data => ({ type: Types.EXCLUDE_TRIP, payload: data })\r\n\r\nexport const passangersAll = data => ({ type: Types.GET_PASSENGERS, payload: data })\r\n\r\nexport const scheduleLoader = () => ({ type: Types.SCHEDULE_LOADER_START })\r\n\r\nexport const scheduleError = data => ({ type: Types.SCHEDULE_ERROR, payload: data })\r\n","import { useLocation } from 'react-router'\r\n\r\nexport const useQuery = () => {\r\n  return new URLSearchParams(useLocation().search)\r\n}\r\n","import axios from 'axios'\r\nimport * as globalSelectors from '../global/globalSelectors'\r\nimport {\r\n  busesAll,\r\n  crewAll,\r\n  scheduleError,\r\n  scheduleLoader,\r\n  scheduleMonth,\r\n  passangersAll,\r\n} from './scheduleActions'\r\n\r\naxios.defaults.baseURL = 'https://car.busis.eu'\r\n\r\nexport const getScheduleMonth = (from, to) => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(scheduleLoader())\r\n  try {\r\n    const { data } = await axios(`/api/schedule?from=${from}&to=${to}`, {\r\n      headers: { Authorization: auth },\r\n    })\r\n    dispatch(scheduleMonth(data))\r\n  } catch (error) {\r\n    dispatch(scheduleError(error))\r\n  }\r\n}\r\n\r\nexport const getCrewAll = () => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(scheduleLoader())\r\n  try {\r\n    const { data } = await axios(`/api/schedule/member/all`, {\r\n      headers: { Authorization: auth },\r\n    })\r\n    dispatch(crewAll(data))\r\n  } catch (error) {\r\n    dispatch(scheduleError(error))\r\n  }\r\n}\r\n\r\nexport const getBusesAll = (departure, tripId) => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(scheduleLoader())\r\n  try {\r\n    const { data } = await axios(\r\n      `api/schedule/vehicle/available?departure=${departure}&tripId=${tripId} `,\r\n      {\r\n        headers: { Authorization: auth },\r\n      }\r\n    )\r\n    dispatch(busesAll(data))\r\n  } catch (error) {\r\n    dispatch(scheduleError(error))\r\n  }\r\n}\r\n\r\nexport const getPassengersAll = (departure, tripId) => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(scheduleLoader())\r\n  try {\r\n    const { data } = await axios(\r\n      `api/schedule/passenger/all?departure=${departure}&tripId=${tripId} `,\r\n      {\r\n        headers: { Authorization: auth },\r\n      }\r\n    )\r\n    dispatch(passangersAll(data))\r\n  } catch (error) {\r\n    dispatch(scheduleError(error))\r\n  }\r\n}\r\n\r\n// api/schedule/passenger/all?departure=2021-09-16&tripId=36314\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst ButtonAdd = ({ click }) => {\r\n  return (\r\n    <Button type=\"button\" onClick={click}>\r\n      +\r\n    </Button>\r\n  )\r\n}\r\n\r\nexport default ButtonAdd\r\n\r\nconst Button = styled.button`\r\n  position: fixed;\r\n  bottom: 16px;\r\n  right: 16px;\r\n  width: 70px;\r\n  height: 70px;\r\n  border: none;\r\n  border-radius: 50%;\r\n  background-color: ${prop => prop.theme.mainColor};\r\n  box-shadow: 0 4px 4px rgba(0, 0, 0, 0.25);\r\n  text-align: center;\r\n  color: ${prop => prop.theme.textColorLight};\r\n  font-size: 36px;\r\n  /* z-index: -1; */\r\n`\r\n","import { Types } from '../actionTypes'\r\n\r\nexport const vehiclesAll = data => ({ type: Types.GET_VEHICLES_ALL, payload: data })\r\n\r\nexport const vehicleId = data => ({ type: Types.GET_VEHICLE_ID, payload: data })\r\n\r\nexport const editVehicleId = data => ({ type: Types.EDIT_VEHICLE, payload: data })\r\n\r\nexport const addVehicleId = data => ({ type: Types.ADD_VEHICLE, payload: data })\r\n\r\nexport const removeVehicleId = id => ({ type: Types.REMOVE_VEHICLE, payload: id })\r\n\r\nexport const vehiclesError = err => ({ type: Types.VEHICLES_ERROR, payload: err })\r\n\r\nexport const vehiclesLoader = () => ({ type: Types.START_VEHICLES_LOADER })\r\n","export const getVehiclesAll = state => state.vehicles.vehicles\r\n\r\nexport const getVehicleId = state => state.vehicles.vehicle\r\n\r\nexport const getVehiclesLoader = state => state.vehicles.loader\r\n\r\nexport const getVehiclesError = state => state.vehicles.error\r\n","import React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport styled from 'styled-components'\r\nimport { ReactComponent as CloseIcon } from '../images/close.svg'\r\nimport { ReactComponent as CheckIcon } from '../images/check.svg'\r\nimport { device } from '../stylesheets/device'\r\nimport { Formik, Form } from 'formik'\r\nimport * as Yup from 'yup'\r\nimport TextInput from './FormikInputs/TextInput'\r\nimport { ButtonRound } from '../stylesheets/mainStyled'\r\nimport { addVehicle } from '../services/apiMethods'\r\nimport { getAuth } from '../redux/global/globalSelectors'\r\nimport {\r\n  addVehicleId,\r\n  vehiclesError,\r\n  vehiclesLoader,\r\n} from '../redux/vehicles/vehiclesActions'\r\nimport Loading from './Loader'\r\nimport { getVehiclesError, getVehiclesLoader } from '../redux/vehicles/vehiclesSelectors'\r\n\r\nconst AddVehicle = ({ onClose }) => {\r\n  const dispatch = useDispatch()\r\n  const auth = useSelector(getAuth)\r\n  const loader = useSelector(getVehiclesLoader)\r\n  const error = useSelector(getVehiclesError)\r\n  return (\r\n    <Container>\r\n      <Header>\r\n        <Title>Новый автобус</Title>\r\n        <CloseIcon onClick={onClose} />\r\n      </Header>\r\n      <Formik\r\n        initialValues={{\r\n          model: '',\r\n          number: '',\r\n          capacity: '',\r\n        }}\r\n        validationSchema={Yup.object({\r\n          model: Yup.string().required('is required'),\r\n          number: Yup.string().required('is required'),\r\n          capacity: Yup.number().required('is required'),\r\n        })}\r\n        onSubmit={async ({ model, number, capacity }) => {\r\n          const bus = { model, number, capacity }\r\n          dispatch(vehiclesLoader())\r\n          try {\r\n            const { data } = await addVehicle(bus, auth)\r\n            dispatch(addVehicleId(data))\r\n            onClose()\r\n          } catch (error) {\r\n            dispatch(vehiclesError(error))\r\n          }\r\n        }}\r\n      >\r\n        <Form>\r\n          <FormBox>\r\n            <TextInput label=\"Название\" name=\"model\" type=\"text\" />\r\n            <TextInput label=\"Госномер\" name=\"number\" type=\"text\" />\r\n            <TextInput label=\"Вместительность\" name=\"capacity\" type=\"text\" />\r\n            {error && <TextError>error</TextError>}\r\n            <ButtonRound type=\"submit\">\r\n              {loader ? (\r\n                <Loading type=\"ThreeDots\" color=\"#00BFFF\" height={15} width={40} />\r\n              ) : (\r\n                <CheckIcon />\r\n              )}\r\n            </ButtonRound>\r\n          </FormBox>\r\n        </Form>\r\n      </Formik>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default AddVehicle\r\n\r\nconst Container = styled.div`\r\n  background-color: #fff;\r\n  height: 100%;\r\n  width: 100%;\r\n  position: relative;\r\n  @media ${device.tablet} {\r\n    width: 320px;\r\n    margin: 0 auto;\r\n  }\r\n`\r\nconst Header = styled.div`\r\n  padding: 12.4px 40px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  background-color: ${prop => prop.theme.mainColor};\r\n`\r\nconst Title = styled.p`\r\n  font-size: 24px;\r\n`\r\nconst FormBox = styled.div`\r\n  padding: 20px;\r\n`\r\nconst TextError = styled.p`\r\n  color: ${props => props.theme.warningColor};\r\n`\r\n","import React from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport { getAuth } from '../../redux/global/globalSelectors'\r\nimport { toAppointBus } from '../../services/apiMethods'\r\nimport { scheduleError } from '../../redux/schedule/scheduleActions'\r\nimport { Button } from '../../stylesheets/mainStyled'\r\nimport { device } from '../../stylesheets/device'\r\n\r\nconst Vehicle = ({ bus, trip }) => {\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n\r\n  const auth = useSelector(getAuth)\r\n  const toAppoint = async () => {\r\n    try {\r\n      const { status } = await toAppointBus(\r\n        trip.id,\r\n        trip.departure.slice(0, 10),\r\n        bus.id,\r\n        auth\r\n      )\r\n      if (status === 200) history.push('/scedule')\r\n    } catch (error) {\r\n      dispatch(scheduleError(error))\r\n    }\r\n  }\r\n  return (\r\n    <Card>\r\n      <BusNumber>{bus.number}</BusNumber>\r\n      <Text>{bus.model}</Text>\r\n      <Text>\r\n        Мест всего:<span>{bus.capacity}</span>\r\n      </Text>\r\n      {bus.hasOwnProperty('location') && (\r\n        <Text>Последний раз находился в: {bus.location.name['RU']}</Text>\r\n      )}\r\n      {/*  */}\r\n      <Button onClick={toAppoint}>Использовать</Button>\r\n    </Card>\r\n  )\r\n}\r\nexport default Vehicle\r\n\r\nconst Card = styled.div`\r\n  padding: 0 10px 20px 0;\r\n  margin-bottom: 20px;\r\n  border-bottom: ${prop => prop.theme.border};\r\n  @media ${device.tablet} {\r\n    border: ${prop => prop.theme.border};\r\n    border-radius: 4px;\r\n    padding: 12px;\r\n    background-color: rgba(0, 0, 0, 0.1);\r\n    box-shadow: 0 4px 4px rgba(0, 0, 0, 0.1);\r\n    margin: 0 20px 20px 0;\r\n  }\r\n`\r\n\r\nconst BusNumber = styled.p`\r\n  max-width: 140px;\r\n  padding: 6px 20px;\r\n  margin-bottom: 12px;\r\n  border: ${prop => prop.theme.border};\r\n  border-radius: 4px;\r\n  font-size: 18px;\r\n  background-color: #fff;\r\n`\r\nconst Text = styled.p`\r\n  font-size: 18px;\r\n  margin-bottom: 6px;\r\n\r\n  @media ${device.tablet} {\r\n  }\r\n`\r\n","import React, { useState, useEffect, useCallback } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport { ReactComponent as ArrowBackIcon } from '../images/arrowBack.svg'\r\nimport AddVehicle from '../components/AddVehicle'\r\nimport ButtonAdd from '../components/ButtonAdd'\r\nimport Modal from '../components/Modal'\r\nimport { device } from '../stylesheets/device'\r\nimport { getBusesAll } from '../redux/schedule/scheduleOperations'\r\nimport { getbuses, getSchedule } from '../redux/schedule/scheduleSelectors'\r\nimport { useQuery } from '../services/useCustomQuery'\r\nimport moment from 'moment'\r\nimport Vehicle from '../components/ScheduleContainer/Vehicle'\r\n\r\nconst BusesPage = () => {\r\n  const dispatch = useDispatch()\r\n  const query = useQuery()\r\n\r\n  const tripId = query.get('tripId')\r\n  const departure = moment(query.get('departure')).format('YYYY-MM-DD')\r\n\r\n  const buses = useSelector(getbuses)\r\n  const trip = useSelector(getSchedule).find(\r\n    trip =>\r\n      trip.id === tripId &&\r\n      trip.departure === moment(query.get('departure')).format('YYYY-MM-DD HH:mm')\r\n  )\r\n  const [isAdd, setIsAdd] = useState(false)\r\n  const history = useHistory()\r\n\r\n  const busesInfo = useCallback(\r\n    (departure, tripId) => dispatch(getBusesAll(departure, tripId)),\r\n    [dispatch]\r\n  )\r\n  useEffect(() => {\r\n    busesInfo(departure, tripId)\r\n  }, [busesInfo, departure, tripId])\r\n\r\n  const handleAdd = () => setIsAdd(!isAdd)\r\n  const toggleOpenModalAdd = () => setIsAdd(!isAdd)\r\n  const goBack = () => history.push('/schedule')\r\n  return (\r\n    <>\r\n      <Container>\r\n        <ButtonAdd click={toggleOpenModalAdd} />\r\n        <Header>\r\n          <ArrowBackIcon onClick={goBack} />\r\n          <Title>\r\n            {moment(query.get('departure')).format('hh:mm')} {trip.name}\r\n          </Title>\r\n        </Header>\r\n        <List>\r\n          {buses.length > 0 &&\r\n            buses.map(bus => <Vehicle key={bus.id} bus={bus} trip={trip} />)}\r\n        </List>\r\n      </Container>\r\n      <Modal open={isAdd} onClose={toggleOpenModalAdd}>\r\n        <AddVehicle onClose={handleAdd} />\r\n      </Modal>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default BusesPage\r\n\r\nconst Container = styled.div`\r\n  position: relative;\r\n`\r\n\r\nconst Header = styled.header`\r\n  display: flex;\r\n  align-items: center;\r\n  background-color: ${prop => prop.theme.mainColor};\r\n  padding: 12.4px 24px;\r\n`\r\nconst Title = styled.p`\r\n  font-size: 24px;\r\n  padding-left: 12px;\r\n`\r\nconst List = styled.ul`\r\n  padding: 20px;\r\n  margin: 0;\r\n  @media ${device.tablet} {\r\n    display: flex;\r\n  }\r\n`\r\n"],"sourceRoot":""}
{"version":3,"sources":["images/check.svg","images/arrowBack.svg","redux/trips/tripsSelectors.js","components/TripsContainer/TripHeader.js","redux/trips/tripsOperations.js","images/delete.svg","services/useCustomQuery.js","images/next.svg","pages/TripRoutePage_D.js"],"names":["_path","_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgCheck","_ref","svgRef","title","titleId","props","width","height","viewBox","xmlns","fill","ref","id","d","stroke","ForwardRef","SvgArrowBack","getTrips","state","trips","getTrip","trip","getPeriods","period","getRoute","route","getTypeTrip","typeTrip","getLoader","loader","getError","error","getPeriodTimes","createSelector","periods","find","el","getPeriodDays","getCurrentStop","currentStop","stop","locality","parent","getTariffsArray","tariff","tariffs","reduce","arr","fromArray","acc","item","ind","some","fromId","toId","findIndex","push","value","TripHeader","onGoBack","name","Header","onClick","style","cursor","Title","to","styled","div","prop","theme","mainColor","p","axios","defaults","baseURL","getAllTrips","dispatch","getState","a","auth","globalSelectors","tripsLoader","headers","Authorization","data","allTrips","tripsError","getTripId","tripId","getTripPeriod","tripPeriod","getTripRoute","tripRoute","getTripTarrif","tripTariff","getTripRouteAndTariff","SvgDelete","useQuery","URLSearchParams","useLocation","search","SvgNext","TripRoutePage","useDispatch","history","useHistory","location","get","lang","useSelector","getLang","getAuth","useState","dragRoute","setDragRoute","tripRouteInfo","useCallback","useEffect","emptyRoute","map","idx","getParentName","getAddress","address","handleAdd","addStopToRoute","pathname","from","handleSubmit","Container","SubTitle","onDragEnd","result","destination","drag","list","startIndex","endIndex","Array","splice","removed","reorder","index","droppableId","provided","snapshot","droppableProps","innerRef","draggableId","StopBox","draggableProps","dragHandleProps","isDragging","draggableStyle","Flex","Text","bold","departureTime","IconBox","e","prev","filter","handleRemove","placeholder","StyledLink","message","type","color","h2","button","textColorLight","li"],"mappings":"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","file":"static/js/11.5df8fc2f.chunk.js","sourcesContent":["var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgCheck(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 31,\n    height: 24,\n    viewBox: \"0 0 31 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"#7E7070\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10.5254 17.4302L4.4849 11.3897L4.13134 11.0362L3.77779 11.3897L1.64645 13.5211L1.29289 13.8746L1.64645 14.2282L10.1718 22.7536L10.5254 23.1071L10.8789 22.7536L29.1476 4.4849L29.5011 4.13134L29.1476 3.77779L27.0162 1.64645L26.6627 1.29289L26.3091 1.64645L10.5254 17.4302Z\",\n    stroke: \"#7E7070\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgCheck);\nexport default __webpack_public_path__ + \"static/media/check.fed458a5.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgArrowBack(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 30,\n    height: 20,\n    viewBox: \"0 0 30 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M30 8.33333H6.38333L12.35 2.35L10 0L0 10L10 20L12.35 17.65L6.38333 11.6667H30V8.33333Z\",\n    fill: \"#7E7070\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgArrowBack);\nexport default __webpack_public_path__ + \"static/media/arrowBack.beea4bf3.svg\";\nexport { ForwardRef as ReactComponent };","import { createSelector } from 'reselect'\r\n\r\nexport const getTrips = state => state.trips.trips\r\nexport const getTrip = state => state.trips.trip\r\nexport const getPeriods = state => state.trips.period\r\nexport const getRoute = state => state.trips.route\r\nexport const getTariff = state => state.trips.tariff\r\nexport const currentStop = state => state.trips.currentStop\r\nexport const getTypeTrip = state => state.trips.typeTrip\r\nexport const getLoader = state => state.trips.loader\r\nexport const getError = state => state.trips.error\r\n\r\nexport const getPeriodTimes = createSelector(getPeriods, periods => {\r\n  if (periods) {\r\n    return periods.find(el => el.hasOwnProperty('times'))\r\n  }\r\n})\r\n\r\nexport const getPeriodDays = createSelector(getPeriods, periods => {\r\n  if (periods) {\r\n    return periods.find(el => el.hasOwnProperty('days'))\r\n  }\r\n})\r\n\r\nexport const getCurrentStop = createSelector(getRoute, currentStop, (route, stop) => {\r\n  return stop ? stop : route[0]?.locality.parent.id\r\n})\r\n\r\nexport const getTariffsArray = createSelector(getRoute, getTariff, (route, tariffs) => {\r\n  if (route.length > 0) {\r\n    return route.reduce(\r\n      (arr, el) => {\r\n        const fromArray = route.reduce((acc, item, ind) => {\r\n          if (el.locality.parent.id !== item.locality.parent.id) {\r\n            if (\r\n              !tariffs.some(\r\n                i =>\r\n                  i.fromId === el.locality.parent.id &&\r\n                  i.toId === route[ind].locality.parent.id\r\n              )\r\n            )\r\n              if (\r\n                route.findIndex(i => i.locality.parent.id === el.locality.parent.id) <=\r\n                ind\r\n              )\r\n                acc.push({\r\n                  fromId: el.locality.parent.id,\r\n                  toId: route[ind].locality.parent.id,\r\n                  value: '',\r\n                })\r\n          }\r\n          return acc\r\n        }, [])\r\n        arr.push(...fromArray)\r\n        return arr\r\n      },\r\n      [...tariffs]\r\n    )\r\n  }\r\n  return []\r\n})\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Link } from 'react-router-dom'\r\nimport { ReactComponent as CloseIcon } from '../../images/close.svg'\r\nimport { ReactComponent as ArrowBackIcon } from '../../images/arrowBack.svg'\r\n\r\nconst TripHeader = ({ onGoBack, name = null }) => {\r\n  return (\r\n    <Header>\r\n      <div>\r\n        {onGoBack && <ArrowBackIcon onClick={onGoBack} style={{ cursor: 'pointer' }} />}\r\n        <Title>Рейс {name}</Title>\r\n      </div>\r\n      <Link to=\"/trips\">\r\n        <CloseIcon />\r\n      </Link>\r\n    </Header>\r\n  )\r\n}\r\n\r\nexport default TripHeader\r\n\r\nconst Header = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  background-color: ${prop => prop.theme.mainColor};\r\n  padding: 12.4px 24px;\r\n  & div {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n`\r\n\r\nconst Title = styled.p`\r\n  font-size: 24px;\r\n  padding-left: 12px;\r\n`\r\n","import axios from 'axios'\r\nimport * as globalSelectors from '../global/globalSelectors'\r\nimport {\r\n  allTrips,\r\n  tripId,\r\n  tripPeriod,\r\n  tripRoute,\r\n  tripsError,\r\n  tripsLoader,\r\n  tripTariff,\r\n} from './tripsActions'\r\n\r\naxios.defaults.baseURL = 'https://car.busis.eu'\r\n\r\nexport const getAllTrips = () => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(tripsLoader())\r\n  try {\r\n    const { data } = await axios('/api/trip/all', {\r\n      headers: { Authorization: auth },\r\n    })\r\n    dispatch(allTrips(data))\r\n  } catch (error) {\r\n    dispatch(tripsError(error))\r\n  }\r\n}\r\n\r\nexport const getTripId = id => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(tripsLoader())\r\n  try {\r\n    const { data } = await axios(`/api/trip?tripId=${id}`, {\r\n      headers: { Authorization: auth },\r\n    })\r\n    dispatch(tripId(data))\r\n  } catch (error) {\r\n    dispatch(tripsError(error))\r\n  }\r\n}\r\n\r\nexport const getTripPeriod = id => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(tripsLoader())\r\n  try {\r\n    const { data } = await axios(`/api/trip/period?tripId=${id}`, {\r\n      headers: { Authorization: auth },\r\n    })\r\n    dispatch(tripPeriod(data))\r\n  } catch (error) {\r\n    dispatch(tripsError(error))\r\n  }\r\n}\r\n\r\nexport const getTripRoute = id => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(tripsLoader())\r\n  try {\r\n    const { data } = await axios(`/api/trip/route?tripId=${id}`, {\r\n      headers: { Authorization: auth },\r\n    })\r\n    dispatch(tripRoute(data))\r\n  } catch (error) {\r\n    dispatch(tripsError(error))\r\n  }\r\n}\r\n\r\nexport const getTripTarrif = id => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(tripsLoader())\r\n  try {\r\n    const { data } = await axios(`/api/trip/tariff?tripId=${id}`, {\r\n      headers: { Authorization: auth },\r\n    })\r\n    dispatch(tripTariff(data))\r\n  } catch (error) {\r\n    dispatch(tripsError(error))\r\n  }\r\n}\r\n\r\nexport const getTripRouteAndTariff = id => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(tripsLoader())\r\n  try {\r\n    const route = await axios(`/api/trip/route?tripId=${id}`, {\r\n      headers: { Authorization: auth },\r\n    })\r\n    const tariff = await axios(`/api/trip/tariff?tripId=${id}`, {\r\n      headers: { Authorization: auth },\r\n    })\r\n    dispatch(tripRoute(route.data))\r\n    dispatch(tripTariff(tariff.data))\r\n  } catch (error) {\r\n    dispatch(tripsError(error))\r\n  }\r\n}\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgDelete(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 14,\n    height: 18,\n    viewBox: \"0 0 14 18\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1 16C1 17.1 1.9 18 3 18H11C12.1 18 13 17.1 13 16V4H1V16ZM14 1H10.5L9.5 0H4.5L3.5 1H0V3H14V1Z\",\n    fill: \"black\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDelete);\nexport default __webpack_public_path__ + \"static/media/delete.d4ee620d.svg\";\nexport { ForwardRef as ReactComponent };","import { useLocation } from 'react-router'\r\n\r\nexport const useQuery = () => {\r\n  return new URLSearchParams(useLocation().search)\r\n}\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgNext(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 13,\n    height: 22,\n    viewBox: \"0 0 13 22\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2.5 0.5L0.0325012 2.9675L8.0475 11L0.0325012 19.0325L2.5 21.5L13 11L2.5 0.5Z\",\n    fill: \"#7E7070\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgNext);\nexport default __webpack_public_path__ + \"static/media/next.8cc89455.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState, useEffect, useCallback } from 'react'\r\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport Loading from '../components/Loader'\r\nimport { ButtonRound, ErrorText } from '../stylesheets/mainStyled'\r\nimport { ReactComponent as NextIcon } from '../images/next.svg'\r\nimport { ReactComponent as CheckIcon } from '../images/check.svg'\r\nimport { ReactComponent as RemoveIcon } from '../images/delete.svg'\r\nimport { getAuth, getLang } from '../redux/global/globalSelectors'\r\nimport TripHeader from '../components/TripsContainer/TripHeader'\r\nimport { tripRoute, tripsError, tripsLoader } from '../redux/trips/tripsActions'\r\nimport {\r\n  getError,\r\n  getLoader,\r\n  getRoute,\r\n  getTrip,\r\n  getTypeTrip,\r\n} from '../redux/trips/tripsSelectors'\r\nimport { getTripRoute } from '../redux/trips/tripsOperations'\r\nimport { addStopToRoute } from '../services/apiMethods'\r\nimport { useQuery } from '../services/useCustomQuery'\r\n\r\n// a little function to help us with reordering the result\r\nconst reorder = (list, startIndex, endIndex) => {\r\n  const result = Array.from(list)\r\n  const [removed] = result.splice(startIndex, 1)\r\n  result.splice(endIndex, 0, removed)\r\n\r\n  return result\r\n}\r\n\r\nconst TripRoutePage = () => {\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n  const location = useLocation()\r\n  const query = useQuery()\r\n  const id = query.get('tripId')\r\n  const lang = useSelector(getLang)\r\n  const trip = useSelector(getTrip)\r\n  const route = useSelector(getRoute)\r\n  const loader = useSelector(getLoader)\r\n  const typeTrip = useSelector(getTypeTrip)\r\n  const error = useSelector(getError)\r\n  const auth = useSelector(getAuth)\r\n\r\n  const [dragRoute, setDragRoute] = useState([])\r\n\r\n  const tripRouteInfo = useCallback(id => dispatch(getTripRoute(id)), [dispatch])\r\n  useEffect(() => {\r\n    if (trip.emptyRoute || route.length > 0) return\r\n    tripRouteInfo(id)\r\n  }, [id, route.length, trip, tripRouteInfo])\r\n\r\n  useEffect(() => {\r\n    setDragRoute(route.map((el, idx) => ({ ...el, id: `item-${idx}` })))\r\n  }, [route])\r\n\r\n  const onDragEnd = result => {\r\n    // dropped outside the list\r\n    if (!result.destination) {\r\n      return\r\n    }\r\n\r\n    const drag = reorder(dragRoute, result.source.index, result.destination.index)\r\n    setDragRoute(drag)\r\n  }\r\n\r\n  const onGoBack = () => {\r\n    dispatch(tripsError(null))\r\n    history.push(location.state.from)\r\n  }\r\n\r\n  const getParentName = stop => {\r\n    return (\r\n      stop.locality.parent.name[lang] ||\r\n      stop.locality.parent.name['RU'] ||\r\n      stop.locality.parent.name['UA'] ||\r\n      stop.locality.parent.name['EN'] ||\r\n      stop.locality.parent.name['PL']\r\n    )\r\n  }\r\n  const getAddress = stop => {\r\n    if (stop.locality.address)\r\n      return (\r\n        stop.locality.address[lang] ||\r\n        stop.locality.address['RU'] ||\r\n        stop.locality.address['UA'] ||\r\n        stop.locality.address['EN'] ||\r\n        stop.locality.address['PL']\r\n      )\r\n    return ''\r\n  }\r\n  const handleRemove = stop => {\r\n    setDragRoute(prev => {\r\n      return prev.filter(el => el.id !== stop.id)\r\n    })\r\n  }\r\n  const handleAdd = async () => {\r\n    dispatch(tripsError(null))\r\n\r\n    if (dragRoute.length > 0) {\r\n      try {\r\n        const { data } = await addStopToRoute(dragRoute, id, auth)\r\n        dispatch(tripRoute(data))\r\n        history.push({\r\n          pathname: '/trip-map',\r\n          search: `?tripId=${id}`,\r\n          state: { from: `/trip-route?tripId=${id}` },\r\n        })\r\n      } catch (error) {\r\n        dispatch(tripsError(error))\r\n      }\r\n    } else {\r\n      dispatch(tripRoute(dragRoute))\r\n      history.push({\r\n        pathname: '/trip-map',\r\n        search: `?tripId=${id}`,\r\n        state: { from: `/trip-route?tripId=${id}` },\r\n      })\r\n    }\r\n  }\r\n  const handleSubmit = async () => {\r\n    dispatch(tripsLoader())\r\n    try {\r\n      const { data } = await addStopToRoute(dragRoute, id, auth)\r\n      dispatch(tripRoute(data))\r\n      typeTrip === 'edit'\r\n        ? history.push({ pathname: `/trip-edit`, search: `?tripId=${id}` })\r\n        : history.push({\r\n            pathname: `/trip-tariff`,\r\n            search: `?tripId=${id}`,\r\n            state: { from: `trip-route?tripId=${id}` },\r\n          })\r\n    } catch (error) {\r\n      dispatch(tripsError(error))\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <TripHeader onGoBack={onGoBack} name={trip.name} />\r\n      <Container>\r\n        <Title>Маршрут</Title>\r\n        <SubTitle>(остановки можно двигать)</SubTitle>\r\n        <DragDropContext onDragEnd={onDragEnd}>\r\n          <Droppable droppableId=\"droppable\">\r\n            {(provided, snapshot) => (\r\n              <div {...provided.droppableProps} ref={provided.innerRef}>\r\n                {dragRoute.map((stop, index) => (\r\n                  <Draggable key={stop.id} draggableId={stop.id} index={index}>\r\n                    {(provided, snapshot) => (\r\n                      <StopBox\r\n                        ref={provided.innerRef}\r\n                        {...provided.draggableProps}\r\n                        {...provided.dragHandleProps}\r\n                        isDragging={snapshot.isDragging}\r\n                        draggableStyle={provided.draggableProps.style}\r\n                      >\r\n                        <Flex>\r\n                          <div>\r\n                            <Text bold>\r\n                              {stop.departureTime} {getParentName(stop)}\r\n                            </Text>\r\n                            <Text>{getAddress(stop)}</Text>\r\n                          </div>\r\n                          <IconBox>\r\n                            <RemoveIcon onClick={e => handleRemove(stop)} />\r\n                          </IconBox>\r\n                        </Flex>\r\n                      </StopBox>\r\n                    )}\r\n                  </Draggable>\r\n                ))}\r\n                {provided.placeholder}\r\n              </div>\r\n            )}\r\n          </Droppable>\r\n        </DragDropContext>\r\n        <StyledLink onClick={handleAdd}>Добавить</StyledLink>\r\n        {error && <ErrorText>{error.message}</ErrorText>}\r\n      </Container>\r\n      <ButtonRound type=\"submit\" onClick={handleSubmit}>\r\n        {loader ? (\r\n          <Loading type=\"ThreeDots\" color=\"#00BFFF\" height={15} width={40} />\r\n        ) : typeTrip === `edit` ? (\r\n          <CheckIcon />\r\n        ) : (\r\n          <NextIcon />\r\n        )}\r\n      </ButtonRound>\r\n    </>\r\n  )\r\n}\r\nexport default TripRoutePage\r\n\r\nconst Container = styled.div`\r\n  position: relative;\r\n  padding: 10px 20px;\r\n  max-width: 420px;\r\n  margin: 0 auto 20px;\r\n`\r\n\r\nconst Title = styled.h2`\r\n  font-size: 24px;\r\n  text-align: center;\r\n  font-weight: 400;\r\n`\r\nconst SubTitle = styled.p`\r\n  font-size: 18px;\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n`\r\nconst StyledLink = styled.button`\r\n  min-width: ${props => (props.width ? props.width : null)};\r\n  display: block;\r\n  padding: 6px 20px;\r\n  background-color: ${prop => prop.theme.mainColor};\r\n  border: 1px solid ${prop => prop.theme.mainColor};\r\n  border-radius: 4px;\r\n  color: ${prop => prop.theme.textColorLight};\r\n  cursor: pointer;\r\n  box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\r\n  font-size: 18px;\r\n  transition: background-color 200ms linear;\r\n  text-align: center;\r\n  width: 80%;\r\n  margin: 0 auto;\r\n  &:hover {\r\n    background-color: #e6eb00;\r\n    transition: background-color 200ms linear;\r\n  }\r\n`\r\nconst StopBox = styled.li`\r\n  ${prop => prop.draggableStyle};\r\n  user-select: 'none';\r\n  padding: 0 0 10px 14px;\r\n  border-left: 1px solid;\r\n  position: relative;\r\n  cursor: move;\r\n  background: ${prop => (prop.isDragging ? 'rgba(255, 251, 2, 0.4)' : 'transparent')};\r\n\r\n  &:last-child {\r\n    border: none;\r\n  }\r\n  &::before {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 16px;\r\n    height: 16px;\r\n    content: '';\r\n    border-radius: 50%;\r\n    border: 1px solid;\r\n    background-color: #c4c4c4;\r\n    transform: translate(-50%);\r\n  }\r\n  /* & div:first-child {\r\n    margin-top: -6px;\r\n  } */\r\n`\r\nconst Flex = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n`\r\nconst IconBox = styled.div`\r\n  padding: 12px;\r\n  cursor: pointer;\r\n`\r\nconst Text = styled.p`\r\n  font-size: 18px;\r\n  font-weight: ${props => (props.bold ? 700 : 400)};\r\n`\r\n"],"sourceRoot":""}
{"version":3,"sources":["images/check.svg","images/arrowBack.svg","redux/trips/tripsSelectors.js","components/TripsContainer/TripHeader.js","redux/trips/tripsOperations.js","images/arrowStart.svg","images/arrowNext.svg","pages/TripTariffPage.js"],"names":["_path","_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgCheck","_ref","svgRef","title","titleId","props","width","height","viewBox","xmlns","fill","ref","id","d","stroke","ForwardRef","SvgArrowBack","getTrips","state","trips","getTrip","trip","getPeriods","period","getRoute","route","getTypeTrip","typeTrip","getLoader","loader","getError","error","getPeriodTimes","createSelector","periods","find","el","getPeriodDays","getCurrentStop","currentStop","stop","locality","parent","getTariffsArray","tariff","tariffs","reduce","arr","fromArray","acc","item","ind","some","fromId","toId","findIndex","push","value","TripHeader","onGoBack","name","Header","onClick","style","cursor","Title","to","styled","div","prop","theme","mainColor","p","axios","defaults","baseURL","getAllTrips","dispatch","getState","a","auth","globalSelectors","tripsLoader","headers","Authorization","data","allTrips","tripsError","getTripId","tripId","getTripPeriod","tripPeriod","getTripRoute","tripRoute","getTripTarrif","tripTariff","getTripRouteAndTariff","SvgArrowStart","SvgArrowNext","Container","TripTariff","useDispatch","history","useHistory","location","useLocation","URLSearchParams","search","get","lang","useSelector","getLang","getAuth","tripTariffInfo","useCallback","tripRouteInfo","tripRouteAndTariffInfo","useEffect","emptyTariff","getParentName","changeTariff","changeTariffValue","handleSubmit","parentId","map","dataRequest","filter","includes","addTariffRoute","setCurrentStop","pathname","from","SubTitle","idx","StopBox","e","changeCurrentStop","Text","bold","departureTime","address","RU","InputBox","type","onChange","InputBoxStart","message","color","h2","li"],"mappings":"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","file":"static/js/17.f243009d.chunk.js","sourcesContent":["var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgCheck(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 31,\n    height: 24,\n    viewBox: \"0 0 31 24\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"#7E7070\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10.5254 17.4302L4.4849 11.3897L4.13134 11.0362L3.77779 11.3897L1.64645 13.5211L1.29289 13.8746L1.64645 14.2282L10.1718 22.7536L10.5254 23.1071L10.8789 22.7536L29.1476 4.4849L29.5011 4.13134L29.1476 3.77779L27.0162 1.64645L26.6627 1.29289L26.3091 1.64645L10.5254 17.4302Z\",\n    stroke: \"#7E7070\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgCheck);\nexport default __webpack_public_path__ + \"static/media/check.fed458a5.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgArrowBack(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 30,\n    height: 20,\n    viewBox: \"0 0 30 20\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M30 8.33333H6.38333L12.35 2.35L10 0L0 10L10 20L12.35 17.65L6.38333 11.6667H30V8.33333Z\",\n    fill: \"#7E7070\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgArrowBack);\nexport default __webpack_public_path__ + \"static/media/arrowBack.beea4bf3.svg\";\nexport { ForwardRef as ReactComponent };","import { createSelector } from 'reselect'\r\n\r\nexport const getTrips = state => state.trips.trips\r\nexport const getTrip = state => state.trips.trip\r\nexport const getPeriods = state => state.trips.period\r\nexport const getRoute = state => state.trips.route\r\nexport const getTariff = state => state.trips.tariff\r\nexport const currentStop = state => state.trips.currentStop\r\nexport const getTypeTrip = state => state.trips.typeTrip\r\nexport const getLoader = state => state.trips.loader\r\nexport const getError = state => state.trips.error\r\n\r\nexport const getPeriodTimes = createSelector(getPeriods, periods => {\r\n  if (periods) {\r\n    return periods.find(el => el.hasOwnProperty('times'))\r\n  }\r\n})\r\n\r\nexport const getPeriodDays = createSelector(getPeriods, periods => {\r\n  if (periods) {\r\n    return periods.find(el => el.hasOwnProperty('days'))\r\n  }\r\n})\r\n\r\nexport const getCurrentStop = createSelector(getRoute, currentStop, (route, stop) => {\r\n  return stop ? stop : route[0]?.locality.parent.id\r\n})\r\n\r\nexport const getTariffsArray = createSelector(getRoute, getTariff, (route, tariffs) => {\r\n  if (route.length > 0) {\r\n    return route.reduce(\r\n      (arr, el) => {\r\n        const fromArray = route.reduce((acc, item, ind) => {\r\n          if (el.locality.parent.id !== item.locality.parent.id) {\r\n            if (\r\n              !tariffs.some(\r\n                i =>\r\n                  i.fromId === el.locality.parent.id &&\r\n                  i.toId === route[ind].locality.parent.id\r\n              )\r\n            )\r\n              if (\r\n                route.findIndex(i => i.locality.parent.id === el.locality.parent.id) <=\r\n                ind\r\n              )\r\n                acc.push({\r\n                  fromId: el.locality.parent.id,\r\n                  toId: route[ind].locality.parent.id,\r\n                  value: '',\r\n                })\r\n          }\r\n          return acc\r\n        }, [])\r\n        arr.push(...fromArray)\r\n        return arr\r\n      },\r\n      [...tariffs]\r\n    )\r\n  }\r\n  return []\r\n})\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Link } from 'react-router-dom'\r\nimport { ReactComponent as CloseIcon } from '../../images/close.svg'\r\nimport { ReactComponent as ArrowBackIcon } from '../../images/arrowBack.svg'\r\n\r\nconst TripHeader = ({ onGoBack, name = null }) => {\r\n  return (\r\n    <Header>\r\n      <div>\r\n        {onGoBack && <ArrowBackIcon onClick={onGoBack} style={{ cursor: 'pointer' }} />}\r\n        <Title>Рейс {name}</Title>\r\n      </div>\r\n      <Link to=\"/trips\">\r\n        <CloseIcon />\r\n      </Link>\r\n    </Header>\r\n  )\r\n}\r\n\r\nexport default TripHeader\r\n\r\nconst Header = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  background-color: ${prop => prop.theme.mainColor};\r\n  padding: 12.4px 24px;\r\n  & div {\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n`\r\n\r\nconst Title = styled.p`\r\n  font-size: 24px;\r\n  padding-left: 12px;\r\n`\r\n","import axios from 'axios'\r\nimport * as globalSelectors from '../global/globalSelectors'\r\nimport {\r\n  allTrips,\r\n  tripId,\r\n  tripPeriod,\r\n  tripRoute,\r\n  tripsError,\r\n  tripsLoader,\r\n  tripTariff,\r\n} from './tripsActions'\r\n\r\naxios.defaults.baseURL = 'https://car.busis.eu'\r\n\r\nexport const getAllTrips = () => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(tripsLoader())\r\n  try {\r\n    const { data } = await axios('/api/trip/all', {\r\n      headers: { Authorization: auth },\r\n    })\r\n    dispatch(allTrips(data))\r\n  } catch (error) {\r\n    dispatch(tripsError(error))\r\n  }\r\n}\r\n\r\nexport const getTripId = id => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(tripsLoader())\r\n  try {\r\n    const { data } = await axios(`/api/trip?tripId=${id}`, {\r\n      headers: { Authorization: auth },\r\n    })\r\n    dispatch(tripId(data))\r\n  } catch (error) {\r\n    dispatch(tripsError(error))\r\n  }\r\n}\r\n\r\nexport const getTripPeriod = id => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(tripsLoader())\r\n  try {\r\n    const { data } = await axios(`/api/trip/period?tripId=${id}`, {\r\n      headers: { Authorization: auth },\r\n    })\r\n    dispatch(tripPeriod(data))\r\n  } catch (error) {\r\n    dispatch(tripsError(error))\r\n  }\r\n}\r\n\r\nexport const getTripRoute = id => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(tripsLoader())\r\n  try {\r\n    const { data } = await axios(`/api/trip/route?tripId=${id}`, {\r\n      headers: { Authorization: auth },\r\n    })\r\n    dispatch(tripRoute(data))\r\n  } catch (error) {\r\n    dispatch(tripsError(error))\r\n  }\r\n}\r\n\r\nexport const getTripTarrif = id => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(tripsLoader())\r\n  try {\r\n    const { data } = await axios(`/api/trip/tariff?tripId=${id}`, {\r\n      headers: { Authorization: auth },\r\n    })\r\n    dispatch(tripTariff(data))\r\n  } catch (error) {\r\n    dispatch(tripsError(error))\r\n  }\r\n}\r\n\r\nexport const getTripRouteAndTariff = id => async (dispatch, getState) => {\r\n  const auth = globalSelectors.getAuth(getState())\r\n  if (!auth) return\r\n  dispatch(tripsLoader())\r\n  try {\r\n    const route = await axios(`/api/trip/route?tripId=${id}`, {\r\n      headers: { Authorization: auth },\r\n    })\r\n    const tariff = await axios(`/api/trip/tariff?tripId=${id}`, {\r\n      headers: { Authorization: auth },\r\n    })\r\n    dispatch(tripRoute(route.data))\r\n    dispatch(tripTariff(tariff.data))\r\n  } catch (error) {\r\n    dispatch(tripsError(error))\r\n  }\r\n}\r\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgArrowStart(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 74,\n    height: 77,\n    viewBox: \"0 0 74 77\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M41.2368 18.9818L41.2368 19.4818L41.2368 18.9818ZM46.2345 23.8319L46.7343 23.8169L46.2345 23.8319ZM46.6097 36.3386L47.1096 36.3452L47.1098 36.3344L47.1095 36.3236L46.6097 36.3386ZM45.7308 76.3489C45.9235 76.5467 46.24 76.5508 46.4378 76.3582L49.6613 73.2182C49.8591 73.0255 49.8633 72.709 49.6706 72.5112C49.4779 72.3134 49.1613 72.3092 48.9635 72.5019L46.0982 75.2929L43.3072 72.4276C43.1145 72.2298 42.7979 72.2257 42.6001 72.4184C42.4023 72.611 42.3982 72.9276 42.5908 73.1254L45.7308 76.3489ZM7.77496 19.4816L41.2368 19.4818L41.2368 18.4818L7.77497 18.4816L7.77496 19.4816ZM45.7347 23.8469L46.1099 36.3536L47.1095 36.3236L46.7343 23.8169L45.7347 23.8469ZM46.1097 36.332L45.589 75.9934L46.5889 76.0066L47.1096 36.3452L46.1097 36.332ZM41.2368 19.4818C43.6695 19.4818 45.6618 21.4152 45.7347 23.8469L46.7343 23.8169C46.6451 20.8449 44.2101 18.4818 41.2368 18.4818L41.2368 19.4818Z\",\n    fill: \"black\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgArrowStart);\nexport default __webpack_public_path__ + \"static/media/arrowStart.e325fee8.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgArrowNext(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 9,\n    height: 46,\n    viewBox: \"0 0 9 46\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4.13534 45.3595C4.3306 45.5548 4.64718 45.5548 4.84244 45.3595L8.02443 42.1776C8.21969 41.9823 8.21969 41.6657 8.02443 41.4705C7.82916 41.2752 7.51258 41.2752 7.31732 41.4705L4.48889 44.2989L1.66046 41.4705C1.4652 41.2752 1.14862 41.2752 0.953358 41.4705C0.758096 41.6657 0.758096 41.9823 0.953358 42.1776L4.13534 45.3595ZM3.98889 0.994629L3.98889 45.006H4.98889L4.98889 0.994629H3.98889Z\",\n    fill: \"black\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgArrowNext);\nexport default __webpack_public_path__ + \"static/media/arrowNext.98e49f67.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useEffect, useCallback } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { useHistory, useLocation } from 'react-router-dom'\r\nimport styled from 'styled-components'\r\nimport Loading from '../components/Loader'\r\nimport { ButtonRound, ErrorText } from '../stylesheets/mainStyled'\r\nimport { ReactComponent as CheckIcon } from '../images/check.svg'\r\nimport { ReactComponent as ArrowStartIcon } from '../images/arrowStart.svg'\r\nimport { ReactComponent as ArrowNextIcon } from '../images/arrowNext.svg'\r\nimport { getAuth, getLang } from '../redux/global/globalSelectors'\r\nimport TripHeader from '../components/TripsContainer/TripHeader'\r\nimport {\r\n  changeTariffValue,\r\n  setCurrentStop,\r\n  tripsError,\r\n  tripsLoader,\r\n  tripTariff,\r\n} from '../redux/trips/tripsActions'\r\nimport {\r\n  getCurrentStop,\r\n  getError,\r\n  getLoader,\r\n  getRoute,\r\n  getTariffsArray,\r\n  getTrip,\r\n  getTypeTrip,\r\n} from '../redux/trips/tripsSelectors'\r\nimport {\r\n  getTripRoute,\r\n  getTripTarrif,\r\n  getTripRouteAndTariff,\r\n} from '../redux/trips/tripsOperations'\r\nimport { addTariffRoute } from '../services/apiMethods'\r\n\r\nconst useQuery = () => {\r\n  return new URLSearchParams(useLocation().search)\r\n}\r\n\r\nconst TripTariff = () => {\r\n  const dispatch = useDispatch()\r\n  const history = useHistory()\r\n  const location = useLocation()\r\n  const query = useQuery()\r\n  const id = query.get('tripId')\r\n  const lang = useSelector(getLang)\r\n  const trip = useSelector(getTrip)\r\n  const route = useSelector(getRoute)\r\n  const loader = useSelector(getLoader)\r\n  const typeTrip = useSelector(getTypeTrip)\r\n  const error = useSelector(getError)\r\n  const auth = useSelector(getAuth)\r\n  const currentStop = useSelector(getCurrentStop)\r\n  const tariffs = useSelector(getTariffsArray)\r\n\r\n  const tripTariffInfo = useCallback(id => dispatch(getTripTarrif(id)), [dispatch])\r\n  const tripRouteInfo = useCallback(id => dispatch(getTripRoute(id)), [dispatch])\r\n  const tripRouteAndTariffInfo = useCallback(\r\n    id => dispatch(getTripRouteAndTariff(id)),\r\n    [dispatch]\r\n  )\r\n\r\n  useEffect(() => {\r\n    if (typeTrip === 'create') return\r\n\r\n    if (trip.emptyTariff && route.length > 0) return\r\n    if (trip.emptyTariff && route.length <= 0) tripRouteInfo(id)\r\n    if (!trip.emptyTariff && route.length > 0) tripTariffInfo(id)\r\n    if (!trip.emptyTariff && route.length <= 0) tripRouteAndTariffInfo(id)\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [])\r\n\r\n  //   хедер вернуться назад\r\n  const onGoBack = () => {\r\n    dispatch(setCurrentStop(''))\r\n\r\n    dispatch(tripTariff([]))\r\n    dispatch(tripsError(null))\r\n    history.push(location.state.from)\r\n  }\r\n  const getParentName = stop => {\r\n    return (\r\n      stop.locality.parent.name[lang] ||\r\n      stop.locality.parent.name['RU'] ||\r\n      stop.locality.parent.name['UA'] ||\r\n      stop.locality.parent.name['EN'] ||\r\n      stop.locality.parent.name['PL']\r\n    )\r\n  }\r\n\r\n  // управление инпутами тарифов\r\n  const changeTariff = ({ target }) => {\r\n    const arr = tariffs.reduce((acc, el) => {\r\n      acc.push(\r\n        el.toId === target.name && el.fromId === currentStop\r\n          ? { ...el, toId: target.name, value: +target.value }\r\n          : el\r\n      )\r\n      return acc\r\n    }, [])\r\n    dispatch(changeTariffValue(arr))\r\n  }\r\n\r\n  // меняем остановку с которой начинается отсчет\r\n  const changeCurrentStop = stop => {\r\n    dispatch(setCurrentStop(stop.locality.parent.id))\r\n  }\r\n\r\n  // отправка данных на сервер\r\n  const handleSubmit = async () => {\r\n    const parentId = route.map(el => el.locality.parent.id)\r\n    dispatch(tripsLoader())\r\n    try {\r\n      // удаляем пустые инпуты и несуществующие\r\n      const dataRequest = tariffs.filter(\r\n        el => el.value && parentId.includes(el.fromId) && parentId.includes(el.toId)\r\n      )\r\n      const { data } = await addTariffRoute(dataRequest, id, auth)\r\n      if (data) {\r\n        dispatch(tripTariff([]))\r\n        dispatch(setCurrentStop(''))\r\n\r\n        typeTrip === 'edit'\r\n          ? history.push({ pathname: 'trip-edit', search: `?tripId=${id}` })\r\n          : history.push('/trips')\r\n      }\r\n    } catch (error) {\r\n      dispatch(tripsError(error))\r\n    }\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <TripHeader onGoBack={onGoBack} name={trip.name} />\r\n      <Container>\r\n        <Title>Стоимость</Title>\r\n        <SubTitle>\r\n          (при выборе остановки отображается стоимость именно с выбранной остановки)\r\n        </SubTitle>\r\n        {route.length > 0 && (\r\n          <ul>\r\n            {route.map((stop, idx) => (\r\n              <StopBox key={idx}>\r\n                <div onClick={e => changeCurrentStop(stop)}>\r\n                  <Text bold>\r\n                    {stop.departureTime} {getParentName(stop)}\r\n                  </Text>\r\n                  <Text>{stop.locality.address.RU}</Text>\r\n                </div>\r\n                {tariffs.length > 0 && (\r\n                  <>\r\n                    {route.findIndex(item => item.locality.parent.id === currentStop) <\r\n                      idx && (\r\n                      <InputBox>\r\n                        <input\r\n                          type=\"number\"\r\n                          name={stop.locality.parent.id}\r\n                          value={\r\n                            tariffs.find(\r\n                              el =>\r\n                                el.fromId === currentStop &&\r\n                                el.toId === stop.locality.parent.id\r\n                            )?.value\r\n                          }\r\n                          onChange={changeTariff}\r\n                        />\r\n                        {route.length - 1 !== idx && <ArrowNextIcon />}\r\n                      </InputBox>\r\n                    )}\r\n                    {route.findIndex(item => item.locality.parent.id === currentStop) ===\r\n                      idx &&\r\n                      route.length - 1 !== idx && (\r\n                        <InputBoxStart>\r\n                          <ArrowStartIcon />\r\n                        </InputBoxStart>\r\n                      )}\r\n                    {route.findIndex(item => item.locality.parent.id === currentStop) >\r\n                      idx && <InputBox></InputBox>}\r\n                  </>\r\n                )}\r\n              </StopBox>\r\n            ))}\r\n          </ul>\r\n        )}\r\n\r\n        {error && <ErrorText>{error.message}</ErrorText>}\r\n      </Container>\r\n      <ButtonRound type=\"submit\" onClick={handleSubmit}>\r\n        {loader ? (\r\n          <Loading type=\"ThreeDots\" color=\"#00BFFF\" height={15} width={40} />\r\n        ) : (\r\n          <CheckIcon />\r\n        )}\r\n      </ButtonRound>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default TripTariff\r\n\r\nconst Container = styled.div`\r\n  padding: 10px 20px 80px;\r\n  & > ul {\r\n    max-width: 420px;\r\n    margin: 0 auto;\r\n  }\r\n`\r\n\r\nconst Title = styled.h2`\r\n  font-size: 24px;\r\n  text-align: center;\r\n  font-weight: 400;\r\n`\r\nconst SubTitle = styled.p`\r\n  font-size: 18px;\r\n  text-align: center;\r\n  margin-bottom: 20px;\r\n`\r\n\r\nconst StopBox = styled.li`\r\n  padding: 0 0 10px 14px;\r\n  border-left: 1px solid;\r\n  position: relative;\r\n  cursor: pointer;\r\n  /* max-width: 80%; */\r\n  display: flex;\r\n  justify-content: space-between;\r\n  &:last-child {\r\n    border: 1px solid #fff;\r\n  }\r\n  &::before {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 16px;\r\n    height: 16px;\r\n    content: '';\r\n    border-radius: 50%;\r\n    border: 1px solid;\r\n    background-color: #c4c4c4;\r\n    transform: translate(-9px);\r\n  }\r\n  /* & p:first-child {\r\n    margin-top: -6px;\r\n  } */\r\n  & > div {\r\n    margin-right: 20px;\r\n  }\r\n  & > div:last-child {\r\n    margin-right: 0px;\r\n  }\r\n`\r\nconst InputBox = styled.div`\r\n  padding-left: 10px;\r\n  width: 80px;\r\n  text-align: center;\r\n\r\n  & input {\r\n    width: 100%;\r\n    text-align: center;\r\n    margin-bottom: 6px;\r\n  }\r\n  /* cursor: pointer; */\r\n`\r\nconst Text = styled.p`\r\n  font-size: 18px;\r\n  font-weight: ${props => (props.bold ? 700 : 400)};\r\n`\r\nconst InputBoxStart = styled.div`\r\n  width: 80px;\r\n  margin-left: -20px;\r\n`\r\n"],"sourceRoot":""}